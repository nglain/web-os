<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web OS - –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –°–∏—Å—Ç–µ–º–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            touch-action: manipulation;
        }

        /* –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –º–∞—Å–∫–æ—Ç–∞ */
        #mascot-welcome {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20000;
            color: white;
            animation: fadeIn 1s ease;
        }

        #mascot-welcome .big-mascot {
            font-size: 150px;
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite;
        }

        #mascot-welcome h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-align: center;
        }

        #mascot-welcome p {
            font-size: 20px;
            margin-bottom: 40px;
            opacity: 0.9;
            text-align: center;
            max-width: 600px;
        }

        #mascot-welcome .start-button {
            padding: 20px 60px;
            font-size: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        #mascot-welcome .start-button:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.6);
        }

        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */

        /* –≠–∫—Ä–∞–Ω –≤—ã–∫–ª—é—á–µ–Ω–∏—è */
        #shutdown-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            cursor: pointer;
            transition: opacity 0.5s ease;
        }

        #shutdown-screen.active {
            display: flex;
        }

        .power-button-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: pulse 2s infinite;
        }

        .power-button-icon {
            width: 120px;
            height: 120px;
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            color: rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .power-button-container:hover .power-button-icon {
            border-color: rgba(255,255,255,0.6);
            color: rgba(255,255,255,0.6);
            transform: scale(1.1);
        }

        .power-text {
            color: rgba(255,255,255,0.4);
            margin-top: 20px;
            font-size: 18px;
            letter-spacing: 2px;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.5;
            }
            50% {
                opacity: 1;
            }
        }

        /* –≠–∫—Ä–∞–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ */
        #lock-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 50000;
            color: white;
            cursor: pointer;
        }

        #lock-screen.active {
            display: flex;
        }

        .lock-time {
            font-size: 96px;
            font-weight: 200;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .lock-date {
            font-size: 24px;
            opacity: 0.9;
            margin-bottom: 40px;
        }

        .lock-hint {
            font-size: 16px;
            opacity: 0.7;
            animation: fadeInOut 2s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% {
                opacity: 0.4;
            }
            50% {
                opacity: 0.8;
            }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ */
        .fade-out {
            animation: fadeOut 0.5s forwards;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.95);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω */
        #boot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            color: white;
        }

        #boot-screen h1 {
            font-size: 48px;
            margin-bottom: 10px;
            animation: fadeIn 1s ease;
        }

        #boot-screen .logo {
            font-size: 80px;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        #boot-screen p {
            font-size: 18px;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        #boot-screen .boot-status {
            font-size: 14px;
            color: rgba(255,255,255,0.6);
            margin-bottom: 30px;
            min-height: 20px;
        }

        #boot-screen .loading-bar {
            width: 300px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        #boot-screen .loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            transition: width 0.3s;
            position: relative;
            overflow: hidden;
        }

        #boot-screen .loading-progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        #boot-screen .boot-timer {
            margin-top: 20px;
            font-size: 16px;
            color: rgba(255,255,255,0.7);
        }

        /* –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª */
        #desktop {
            width: 100vw;
            height: 100vh;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080"><defs><linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23667eea"/><stop offset="100%" style="stop-color:%23764ba2"/></linearGradient></defs><rect fill="url(%23g1)" width="1920" height="1080"/></svg>') center/cover;
            position: relative;
            display: none;
        }

        /* –ü–∞–Ω–µ–ª—å –∑–∞–¥–∞—á */
        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: rgba(30, 30, 30, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            padding: 0 10px;
            z-index: 1000;
        }

        #start-button {
            padding: 8px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: transform 0.2s;
        }

        #start-button:hover {
            transform: scale(1.05);
        }

        #taskbar-apps {
            display: flex;
            gap: 5px;
            margin-left: 10px;
            flex: 1;
        }

        .taskbar-app {
            padding: 5px 15px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }

        .taskbar-app:hover {
            background: rgba(255,255,255,0.2);
        }

        #clock {
            color: white;
            font-size: 14px;
            padding: 0 15px;
        }

        #power-button {
            padding: 8px 15px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            transition: all 0.2s;
            position: relative;
        }

        #power-button:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        /* –ú–µ–Ω—é –ø–∏—Ç–∞–Ω–∏—è */
        #power-menu {
            position: fixed;
            bottom: 60px;
            right: 10px;
            background: rgba(30, 30, 30, 0.98);
            border-radius: 10px;
            padding: 10px;
            display: none;
            z-index: 2000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        #power-menu.active {
            display: block;
        }

        .power-menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 20px;
            color: white;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            width: 200px;
            font-size: 14px;
            transition: background 0.2s;
        }

        .power-menu-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .power-menu-item .icon {
            font-size: 20px;
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è */
        body.mobile-mode .desktop-icon {
            width: 80px;
        }

        body.mobile-mode .desktop-icon .icon {
            font-size: 36px;
        }

        body.mobile-mode .desktop-icon .label {
            font-size: 10px;
        }

        body.mobile-mode .window {
            min-width: 90vw;
            left: 5vw !important;
            width: 90vw !important;
        }

        body.mobile-mode #taskbar {
            height: 60px;
        }

        body.mobile-mode #start-button {
            padding: 10px 15px;
            font-size: 12px;
        }

        body.mobile-mode .taskbar-app {
            padding: 8px 12px;
            font-size: 11px;
        }

        /* –ö–æ–º–∏–∫—Å—ã */
        #comics-gallery {
            padding: 10px;
        }

        .comics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .comic-item {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .comic-item:hover {
            transform: scale(1.05);
        }

        .comic-cover {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
        }

        .comic-info {
            padding: 10px;
        }

        .comic-info h3 {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .comic-info p {
            font-size: 11px;
            color: #aaa;
        }

        .comic-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 30000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .comic-viewer.active {
            display: flex;
        }

        .comic-page {
            max-width: 90%;
            max-height: 80%;
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .comic-nav {
            display: flex;
            gap: 20px;
        }

        .comic-nav button {
            padding: 15px 30px;
            font-size: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        .comic-close {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        /* –ú–µ–Ω—é –ü—É—Å–∫ */
        #start-menu {
            position: fixed;
            bottom: 55px;
            left: 10px;
            width: 400px;
            background: rgba(30, 30, 30, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 10px;
            padding: 20px;
            display: none;
            z-index: 999;
            color: white;
        }

        #start-menu h2 {
            margin-bottom: 15px;
            font-size: 18px;
        }

        .menu-section {
            margin-bottom: 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 8px;
            transition: background 0.2s;
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.15);
        }

        .menu-item .icon {
            font-size: 24px;
            margin-right: 12px;
        }

        /* –ò–∫–æ–Ω–∫–∏ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ */
        .desktop-icon {
            position: absolute;
            width: 100px;
            text-align: center;
            cursor: pointer;
            color: white;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .desktop-icon:hover {
            background: rgba(255,255,255,0.1);
        }

        .desktop-icon .icon {
            font-size: 48px;
            margin-bottom: 5px;
        }

        .desktop-icon .label {
            font-size: 12px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* –û–∫–Ω–∞ */
        .window {
            position: absolute;
            background: rgba(40, 40, 40, 0.98);
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            min-width: 400px;
            min-height: 300px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .window-header {
            background: rgba(30, 30, 30, 0.95);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
        }

        .window-title {
            color: white;
            font-weight: bold;
        }

        .window-controls {
            display: flex;
            gap: 8px;
        }

        .window-controls button {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .close-btn {
            background: #ff5f57;
            color: white;
        }

        .maximize-btn {
            background: #ffbd2e;
            color: white;
        }

        .minimize-btn {
            background: #28c940;
            color: white;
        }

        .window-content {
            flex: 1;
            padding: 20px;
            color: white;
            overflow: auto;
        }

        /* –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π */
        #app-manager {
            padding: 20px;
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .app-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }

        .app-card:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.1);
        }

        .app-card .icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .app-card h3 {
            margin-bottom: 10px;
            font-size: 16px;
        }

        .app-card p {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 15px;
        }

        .download-btn {
            padding: 8px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .download-btn.downloaded {
            background: #28c940;
            cursor: default;
        }

        /* –ò–≥—Ä–∞ –ó–º–µ–π–∫–∞ */
        #snake-game {
            text-align: center;
        }

        #snake-canvas {
            border: 3px solid #667eea;
            border-radius: 10px;
            background: #1a1a2e;
            display: block;
            margin: 20px auto;
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 18px;
        }

        /* –ò–≥—Ä–∞ –î—É—ç–ª—å */
        #duel-game {
            text-align: center;
        }

        #duel-canvas {
            border: 3px solid #764ba2;
            border-radius: 10px;
            background: linear-gradient(180deg, #2d1b4e 0%, #1a1a2e 100%);
            display: block;
            margin: 20px auto;
            cursor: crosshair;
        }

        .health-bar {
            width: 200px;
            height: 20px;
            background: #333;
            border-radius: 10px;
            margin: 10px auto;
            overflow: hidden;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff5f57 0%, #ffbd2e 100%);
            transition: width 0.3s;
        }

        .controls-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            font-size: 14px;
        }

        /* –ì–∞–ª–µ—Ä–µ—è —Å–º–∞–π–ª–∏–∫–æ–≤ */
        #emoji-gallery {
            padding: 20px;
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
        }

        .emoji-item {
            font-size: 48px;
            text-align: center;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .emoji-item:hover {
            transform: scale(1.2);
        }

        /* –†–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º */
        #program-editor {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        #program-code {
            flex: 1;
            background: #1a1a2e;
            color: #00ff00;
            border: none;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: none;
            margin-bottom: 15px;
        }

        .editor-buttons {
            display: flex;
            gap: 10px;
        }

        .editor-buttons button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .notification {
            position: fixed;
            bottom: 70px;
            right: 20px;
            background: rgba(40, 40, 40, 0.98);
            backdrop-filter: blur(10px);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            z-index: 2000;
            animation: slideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border: 1px solid rgba(255,255,255,0.1);
            max-width: 350px;
        }

        .notification::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px 0 0 12px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(120%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(120%);
                opacity: 0;
            }
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ */
        .window {
            position: absolute;
            background: rgba(40, 40, 40, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1);
            min-width: 400px;
            min-height: 300px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .window-header {
            background: rgba(30, 30, 30, 0.95);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .window-controls button {
            width: 28px;
            height: 28px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .window-controls button:hover {
            transform: scale(1.1);
        }

        /* –ß–∞—Ç —Å –º–∞—Å–∫–æ—Ç–æ–º */
        #chat-app {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        #chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .chat-message {
            margin-bottom: 15px;
            animation: slideIn 0.3s ease;
        }

        .chat-message .sender {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chat-message .avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .chat-message.bot .avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .chat-message.hacker .avatar {
            background: linear-gradient(135deg, #ff0000 0%, #8b0000 100%);
        }

        .chat-message .text {
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            border-radius: 10px;
            display: inline-block;
            max-width: 80%;
        }

        .chat-message.bot .sender {
            color: #667eea;
        }

        .chat-message.hacker .sender {
            color: #ff4444;
        }

        .chat-message.hacker .text {
            background: rgba(255,0,0,0.1);
            border: 1px solid rgba(255,0,0,0.3);
        }

        #chat-input-area {
            display: flex;
            gap: 10px;
        }

        #chat-input {
            flex: 1;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }

        #chat-input:focus {
            outline: none;
            border-color: #667eea;
        }

        #chat-send {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: bold;
        }

        #chat-send:hover {
            transform: scale(1.05);
        }

        /* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –°–æ–æ–±—â–µ–Ω–∏—è (Telegram-style) */
        #messages-app {
            display: flex;
            height: 100%;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .chats-list {
            width: 300px;
            background: rgba(30,30,30,0.95);
            border-right: 1px solid rgba(255,255,255,0.1);
            overflow-y: auto;
        }

        .chat-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .chat-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .chat-item.active {
            background: rgba(102, 126, 234, 0.3);
        }

        .chat-item-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .chat-item-avatar.robot {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .chat-item-avatar.hacker {
            background: linear-gradient(135deg, #ff0000 0%, #8b0000 100%);
        }

        .chat-item-info {
            flex: 1;
            min-width: 0;
        }

        .chat-item-name {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .chat-item-last-message {
            font-size: 13px;
            opacity: 0.7;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-item-time {
            font-size: 12px;
            opacity: 0.5;
        }

        .chat-view {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-view-header {
            padding: 15px 20px;
            background: rgba(40,40,40,0.95);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-view-header .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .chat-view-header .info h3 {
            font-size: 16px;
            margin-bottom: 2px;
        }

        .chat-view-header .info p {
            font-size: 12px;
            opacity: 0.7;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 15px;
            animation: slideIn 0.3s ease;
        }

        .message.received {
            background: rgba(255,255,255,0.1);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .message.sent {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .message-input-area {
            padding: 15px;
            background: rgba(40,40,40,0.95);
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 12px 18px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            color: white;
            font-size: 14px;
        }

        .message-input:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255,255,255,0.15);
        }

        .send-button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-button:hover {
            transform: scale(1.1);
        }

        .no-chat-selected {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0.5;
        }

        .no-chat-selected .icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .no-chat-selected p {
            font-size: 18px;
        }

        /* –ú–∞—Å–∫–æ—Ç */
        .mascot-container {
            position: fixed;
            bottom: 80px;
            right: 30px;
            z-index: 500;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .mascot-container:hover {
            transform: scale(1.15);
        }

        .mascot {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.5);
            animation: float 3s ease-in-out infinite;
            position: relative;
            border: 3px solid rgba(255,255,255,0.3);
        }

        .mascot::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            z-index: -1;
            opacity: 0.3;
            animation: pulse-ring 2s infinite;
        }

        @keyframes pulse-ring {
            0% {
                transform: scale(1);
                opacity: 0.3;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.1;
            }
            100% {
                transform: scale(1);
                opacity: 0.3;
            }
        }

        .mascot.dead {
            background: linear-gradient(135deg, #333 0%, #666 100%);
            animation: none;
            box-shadow: 0 8px 30px rgba(0,0,0,0.5);
        }

        .mascot.dead::after {
            content: 'üíÄ';
            position: absolute;
            top: -12px;
            right: -12px;
            font-size: 28px;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-12px);
            }
        }

        .mascot-bubble {
            position: absolute;
            bottom: 85px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            color: #333;
            padding: 12px 18px;
            border-radius: 18px;
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .mascot-bubble::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid white;
        }

        .mascot-container:hover .mascot-bubble {
            opacity: 1;
        }

        /* –≠–∫—Ä–∞–Ω —Å–º–µ—Ä—Ç–∏ */
        #death-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a0000 0%, #330000 50%, #1a0000 100%);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100000;
            color: white;
            animation: deathFadeIn 1s ease;
        }

        #death-screen.active {
            display: flex;
        }

        @keyframes deathFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .death-mascot {
            font-size: 150px;
            margin-bottom: 30px;
            filter: grayscale(100%);
            animation: deathPulse 2s infinite;
        }

        @keyframes deathPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.5;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        .death-text {
            font-size: 48px;
            margin-bottom: 20px;
            color: #ff4444;
            text-shadow: 0 0 20px rgba(255,0,0,0.5);
        }

        .death-subtext {
            font-size: 24px;
            color: #ff6666;
            margin-bottom: 40px;
            text-align: center;
            max-width: 600px;
        }

        .death-button {
            padding: 15px 40px;
            font-size: 20px;
            background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .death-button:hover {
            transform: scale(1.1);
        }

        .glitch {
            animation: glitch 0.5s infinite;
        }

        @keyframes glitch {
            0% {
                transform: translate(0);
            }
            20% {
                transform: translate(-2px, 2px);
            }
            40% {
                transform: translate(-2px, -2px);
            }
            60% {
                transform: translate(2px, 2px);
            }
            80% {
                transform: translate(2px, -2px);
            }
            100% {
                transform: translate(0);
            }
        }

        /* –ò–≥—Ä–∞ Geometry Dash */
        #geometry-canvas {
            border: 3px solid #ff6b6b;
            border-radius: 10px;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
            display: block;
            margin: 20px auto;
        }

        /* –ò–≥—Ä–∞ Brawl Stars */
        #brawl-canvas {
            border: 3px solid #ffd93d;
            border-radius: 10px;
            background: linear-gradient(180deg, #2d3436 0%, #000000 100%);
            display: block;
            margin: 20px auto;
            cursor: crosshair;
        }

        .brawl-health {
            width: 150px;
            height: 15px;
            background: #333;
            border-radius: 8px;
            margin: 8px auto;
            overflow: hidden;
        }

        .brawl-health-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894 0%, #00cec9 100%);
            transition: width 0.2s;
        }
    </style>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –º–∞—Å–∫–æ—Ç–∞ -->
    <div id="mascot-welcome">
        <div class="big-mascot">ü§ñ</div>
        <h1>–ü—Ä–∏–≤–µ—Ç! –Ø –†–æ–±–æ—Ç!</h1>
        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Web OS - —Ç–≤–æ—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É! –Ø –±—É–¥—É —Ç–≤–æ–∏–º –º–∞—Å–∫–æ—Ç–æ–º-–ø–æ–º–æ—â–Ω–∏–∫–æ–º. –î–∞–≤–∞–π –Ω–∞—á–Ω—ë–º!</p>
        <button class="start-button" onclick="startFromWelcome()">üöÄ –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–∫–ª—é—á–µ–Ω–∏—è -->
    <div id="shutdown-screen" onclick="turnOn()">
        <div class="power-button-container">
            <div class="power-button-icon">‚èª</div>
            <div class="power-text">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è</div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ -->
    <div id="lock-screen" onclick="unlockScreen()">
        <div class="lock-time" id="lock-time-display">00:00</div>
        <div class="lock-date" id="lock-date-display">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 1 –Ø–Ω–≤–∞—Ä—è</div>
        <div class="lock-hint">–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–º–µ—Ä—Ç–∏ -->
    <div id="death-screen">
        <div class="death-mascot">ü§ñüíÄ</div>
        <div class="death-text glitch">–°–ò–°–¢–ï–ú–ê –£–ù–ò–ß–¢–û–ñ–ï–ù–ê</div>
        <div class="death-subtext">
            –í—ã —Å–∫–∞—á–∞–ª–∏ VIP –≤–∏—Ä—É—Å –æ—Ç ???<br>
            –í–∞—à –º–∞—Å–∫–æ—Ç –±—ã–ª —É–Ω–∏—á—Ç–æ–∂–µ–Ω...<br>
            –ù–µ—Ç –ø—É—Ç–∏ –Ω–∞–∑–∞–¥.
        </div>
        <button class="death-button" onclick="restoreSystem()">üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É</button>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="boot-screen">
        <div class="logo">üñ•Ô∏è</div>
        <h1>Web OS</h1>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã...</p>
        <div class="boot-status" id="boot-status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
        </div>
        <div class="boot-timer" id="boot-timer">–û—Å—Ç–∞–ª–æ—Å—å: 20 —Å–µ–∫—É–Ω–¥</div>
    </div>

    <!-- –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª -->
    <div id="desktop">
        <!-- –ò–∫–æ–Ω–∫–∏ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ -->
        <div class="desktop-icon" style="top: 20px; left: 20px;" onclick="openApp('snake')">
            <div class="icon">üêç</div>
            <div class="label">–ó–º–µ–π–∫–∞</div>
        </div>

        <div class="desktop-icon" style="top: 150px; left: 20px;" onclick="openApp('duel')">
            <div class="icon">‚öîÔ∏è</div>
            <div class="label">–î—É—ç–ª—å</div>
        </div>

        <div class="desktop-icon" style="top: 280px; left: 20px;" onclick="openApp('emoji')">
            <div class="icon">üòÄ</div>
            <div class="label">–°–º–∞–π–ª–∏–∫–∏</div>
        </div>

        <div class="desktop-icon" style="top: 410px; left: 20px;" onclick="openApp('editor')">
            <div class="icon">üìù</div>
            <div class="label">–†–µ–¥–∞–∫—Ç–æ—Ä</div>
        </div>

        <div class="desktop-icon" style="top: 540px; left: 20px;" onclick="openApp('manager')">
            <div class="icon">üè™</div>
            <div class="label">–ú–µ–Ω–µ–¥–∂–µ—Ä</div>
        </div>

        <div class="desktop-icon" style="top: 670px; left: 20px;" onclick="openApp('comics')">
            <div class="icon">üìö</div>
            <div class="label">–ö–æ–º–∏–∫—Å—ã</div>
        </div>

        <div class="desktop-icon" style="top: 800px; left: 20px;" onclick="openApp('chat')">
            <div class="icon">üí¨</div>
            <div class="label">–ß–∞—Ç</div>
        </div>

        <div class="desktop-icon" style="top: 930px; left: 20px;" onclick="openApp('messages')">
            <div class="icon">‚úâÔ∏è</div>
            <div class="label">–°–æ–æ–±—â–µ–Ω–∏—è</div>
        </div>

        <!-- –û–∫–Ω–æ –ó–º–µ–π–∫–∏ -->
        <div class="window" id="snake-window" style="top: 50px; left: 150px; width: 500px;">
            <div class="window-header">
                <div class="window-title">üêç –ó–º–µ–π–∫–∞</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('snake')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('snake')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('snake')">√ó</button>
                </div>
            </div>
            <div class="window-content">
                <div id="snake-game">
                    <div class="game-info">
                        <div>–°—á–µ—Ç: <span id="snake-score">0</span></div>
                        <div>–†–µ–∫–æ—Ä–¥: <span id="snake-highscore">0</span></div>
                    </div>
                    <canvas id="snake-canvas" width="400" height="400"></canvas>
                    <div class="controls-info">
                        <p>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: W A S D –∏–ª–∏ —Å—Ç—Ä–µ–ª–∫–∏</p>
                        <button onclick="startSnakeGame()" style="margin-top: 15px; padding: 10px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 5px; cursor: pointer;">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –î—É—ç–ª–∏ -->
        <div class="window" id="duel-window" style="top: 100px; left: 200px; width: 650px;">
            <div class="window-header">
                <div class="window-title">‚öîÔ∏è –î—É—ç–ª—å</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('duel')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('duel')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('duel')">√ó</button>
                </div>
            </div>
            <div class="window-content">
                <div id="duel-game">
                    <div class="game-info">
                        <div>
                            <div>–í–∞—à–µ HP</div>
                            <div class="health-bar">
                                <div class="health-fill" id="player-health" style="width: 100%;"></div>
                            </div>
                        </div>
                        <div>
                            <div>–°—á–µ—Ç: <span id="duel-score">0</span></div>
                        </div>
                        <div>
                            <div>HP –ë–æ—Ç–∞</div>
                            <div class="health-bar">
                                <div class="health-fill" id="bot-health" style="width: 100%;"></div>
                            </div>
                        </div>
                    </div>
                    <canvas id="duel-canvas" width="600" height="400"></canvas>
                    <div class="controls-info">
                        <p>üéÆ –î–≤–∏–∂–µ–Ω–∏–µ: W A S D | –ê—Ç–∞–∫–∞: –ö–õ–ò–ö –ú–´–®–ò</p>
                        <button onclick="startDuelGame()" style="margin-top: 15px; padding: 10px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 5px; cursor: pointer;">–ù–∞—á–∞—Ç—å –±–æ–π</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –°–º–∞–π–ª–∏–∫–æ–≤ -->
        <div class="window" id="emoji-window" style="top: 80px; left: 180px; width: 700px; height: 500px;">
            <div class="window-header">
                <div class="window-title">üòÄ –ì–∞–ª–µ—Ä–µ—è –°–º–∞–π–ª–∏–∫–æ–≤</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('emoji')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('emoji')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('emoji')">√ó</button>
                </div>
            </div>
            <div class="window-content" id="emoji-gallery">
                <div class="emoji-grid" id="emoji-grid"></div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –†–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
        <div class="window" id="editor-window" style="top: 60px; left: 160px; width: 600px; height: 500px;">
            <div class="window-header">
                <div class="window-title">üìù –†–µ–¥–∞–∫—Ç–æ—Ä –ü—Ä–æ–≥—Ä–∞–º–º</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('editor')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('editor')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('editor')">√ó</button>
                </div>
            </div>
            <div class="window-content" id="program-editor">
                <textarea id="program-code" placeholder="// –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–≥—Ä–∞–º–º—É –∑–¥–µ—Å—å...
// –ü—Ä–∏–º–µ—Ä:
console.log('–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!');
alert('–ú–æ—è –ø–µ—Ä–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞!');"></textarea>
                <div class="editor-buttons">
                    <button onclick="runProgram()">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                    <button onclick="saveProgram()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button onclick="clearProgram()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –ú–µ–Ω–µ–¥–∂–µ—Ä–∞ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–π -->
        <div class="window" id="manager-window" style="top: 100px; left: 200px; width: 700px; height: 500px;">
            <div class="window-header">
                <div class="window-title">üè™ –ú–µ–Ω–µ–¥–∂–µ—Ä –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–π</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('manager')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('manager')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('manager')">√ó</button>
                </div>
            </div>
            <div class="window-content" id="app-manager">
                <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
                <div class="app-grid">
                    <div class="app-card">
                        <div class="icon">üêç</div>
                        <h3>–ó–º–µ–π–∫–∞</h3>
                        <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ —Å–æ –∑–º–µ–π–∫–æ–π</p>
                        <button class="download-btn downloaded">‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">‚öîÔ∏è</div>
                        <h3>–î—É—ç–ª—å</h3>
                        <p>–°—Ä–∞–∂–µ–Ω–∏–µ —Å –±–æ—Ç–∞–º–∏</p>
                        <button class="download-btn downloaded">‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üòÄ</div>
                        <h3>–°–º–∞–π–ª–∏–∫–∏</h3>
                        <p>–ë–æ–ª—å—à–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —ç–º–æ–¥–∑–∏</p>
                        <button class="download-btn downloaded">‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üìù</div>
                        <h3>–†–µ–¥–∞–∫—Ç–æ—Ä</h3>
                        <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã</p>
                        <button class="download-btn downloaded">‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üìö</div>
                        <h3>–ö–æ–º–∏–∫—Å—ã</h3>
                        <p>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–∏–∫—Å–æ–≤</p>
                        <button class="download-btn downloaded">‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üéÆ</div>
                        <h3>–ü–∏–Ω–≥-–ü–æ–Ω–≥</h3>
                        <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∞—Ä–∫–∞–¥–Ω–∞—è –∏–≥—Ä–∞</p>
                        <button class="download-btn" onclick="downloadApp('pong', 'üèì', '–ü–∏–Ω–≥-–ü–æ–Ω–≥')">–°–∫–∞—á–∞—Ç—å</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üßÆ</div>
                        <h3>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h3>
                        <p>–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</p>
                        <button class="download-btn" onclick="downloadApp('calculator', 'üî¢', '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä')">–°–∫–∞—á–∞—Ç—å</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üìÖ</div>
                        <h3>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</h3>
                        <p>–û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Å–≤–æ—ë –≤—Ä–µ–º—è</p>
                        <button class="download-btn" onclick="downloadApp('calendar', 'üìÜ', '–ö–∞–ª–µ–Ω–¥–∞—Ä—å')">–°–∫–∞—á–∞—Ç—å</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üéµ</div>
                        <h3>–ú—É–∑—ã–∫–∞</h3>
                        <p>–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä</p>
                        <button class="download-btn" onclick="downloadApp('music', 'üé∂', '–ú—É–∑—ã–∫–∞')">–°–∫–∞—á–∞—Ç—å</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">üî∫</div>
                        <h3>–ì–µ–º–∏—Ç—Ä–∏–¥—à</h3>
                        <p>Geometry Dash - –ø—Ä—ã–≥–∞–π —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è!</p>
                        <button class="download-btn" onclick="downloadApp('geometry', 'üî∫', '–ì–µ–º–∏—Ç—Ä–∏–¥—à')">–°–∫–∞—á–∞—Ç—å</button>
                    </div>
                    <div class="app-card">
                        <div class="icon">‚≠ê</div>
                        <h3>–ë—Ä–∞–≤–ª –°—Ç–∞—Ä—Å</h3>
                        <p>Brawl Stars - —Å—Ä–∞–∂–µ–Ω–∏–µ 2 –Ω–∞ 2!</p>
                        <button class="download-btn" onclick="downloadApp('brawl', '‚≠ê', '–ë—Ä–∞–≤–ª –°—Ç–∞—Ä—Å')">–°–∫–∞—á–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ Geometry Dash -->
        <div class="window" id="geometry-window" style="top: 80px; left: 200px; width: 750px;">
            <div class="window-header">
                <div class="window-title">üî∫ –ì–µ–º–∏—Ç—Ä–∏–¥—à</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('geometry')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('geometry')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('geometry')">√ó</button>
                </div>
            </div>
            <div class="window-content">
                <div id="geometry-game">
                    <div class="game-info">
                        <div>–°—á–µ—Ç: <span id="geometry-score">0</span></div>
                        <div>–†–µ–∫–æ—Ä–¥: <span id="geometry-highscore">0</span></div>
                        <div>–ü–æ–ø—ã—Ç–∫–∞: <span id="geometry-attempt">1</span></div>
                    </div>
                    <canvas id="geometry-canvas" width="700" height="300"></canvas>
                    <div class="controls-info">
                        <p>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–†–û–ë–ï–õ –∏–ª–∏ –ö–õ–ò–ö –¥–ª—è –ø—Ä—ã–∂–∫–∞ | –ò–∑–±–µ–≥–∞–π —à–∏–ø–æ–≤!</p>
                        <button onclick="startGeometryGame()" style="margin-top: 15px; padding: 10px 30px; background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%); color: white; border: none; border-radius: 5px; cursor: pointer;">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ Brawl Stars -->
        <div class="window" id="brawl-window" style="top: 100px; left: 220px; width: 800px;">
            <div class="window-header">
                <div class="window-title">‚≠ê –ë—Ä–∞–≤–ª –°—Ç–∞—Ä—Å</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('brawl')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('brawl')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('brawl')">√ó</button>
                </div>
            </div>
            <div class="window-content">
                <div id="brawl-game">
                    <div class="game-info">
                        <div>
                            <div style="color: #667eea;">–ò–≥—Ä–æ–∫ 1</div>
                            <div class="brawl-health">
                                <div class="brawl-health-fill" id="brawl-p1-health" style="width: 100%;"></div>
                            </div>
                        </div>
                        <div>
                            <div>–°—á–µ—Ç: <span id="brawl-score">0</span> - <span id="brawl-bots">0</span></div>
                        </div>
                        <div>
                            <div style="color: #ff6b6b;">–ë–æ—Ç</div>
                            <div class="brawl-health">
                                <div class="brawl-health-fill" id="brawl-bot-health" style="width: 100%; background: linear-gradient(90deg, #ff6b6b 0%, #ee5a24 100%);"></div>
                            </div>
                        </div>
                    </div>
                    <canvas id="brawl-canvas" width="750" height="450"></canvas>
                    <div class="controls-info">
                        <p>üéÆ –î–≤–∏–∂–µ–Ω–∏–µ: W A S D | –°—Ç—Ä–µ–ª—å–±–∞: –ö–õ–ò–ö –ú–´–®–ò | –£–±–µ–π –±–æ—Ç–∞ 3 —Ä–∞–∑–∞!</p>
                        <button onclick="startBrawlGame()" style="margin-top: 15px; padding: 10px 30px; background: linear-gradient(135deg, #ffd93d 0%, #ff6b6b 100%); color: white; border: none; border-radius: 5px; cursor: pointer;">–ù–∞—á–∞—Ç—å –±–æ–π</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –ö–æ–º–∏–∫—Å–æ–≤ -->
        <div class="window" id="comics-window" style="top: 70px; left: 180px; width: 750px; height: 550px;">
            <div class="window-header">
                <div class="window-title">üìö –ö–æ–º–∏–∫—Å—ã</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('comics')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('comics')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('comics')">√ó</button>
                </div>
            </div>
            <div class="window-content" id="comics-gallery">
                <h2 style="margin-bottom: 20px;">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–∏–∫—Å–æ–≤</h2>
                <div class="comics-grid" id="comics-grid"></div>
            </div>
        </div>

        <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ –∫–æ–º–∏–∫—Å–æ–≤ -->
        <div class="comic-viewer" id="comic-viewer">
            <button class="comic-close" onclick="closeComicViewer()">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
            <div class="comic-page" id="comic-page">
                <h2 id="comic-title" style="margin-bottom: 20px; color: #333;"></h2>
                <div id="comic-content" style="font-size: 18px; line-height: 1.6; color: #666;"></div>
            </div>
            <div class="comic-nav">
                <button onclick="prevComicPage()">‚óÄ –ü—Ä–µ–¥—ã–¥—É—â–∞—è</button>
                <span id="comic-page-num" style="color: white; font-size: 18px; padding: 15px;">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</span>
                <button onclick="nextComicPage()">–°–ª–µ–¥—É—é—â–∞—è ‚ñ∂</button>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –ß–∞—Ç–∞ -->
        <div class="window" id="chat-window" style="top: 80px; left: 200px; width: 500px; height: 600px;">
            <div class="window-header">
                <div class="window-title">üí¨ –ß–∞—Ç —Å –†–æ–±–æ—Ç–æ–º</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('chat')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('chat')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('chat')">√ó</button>
                </div>
            </div>
            <div class="window-content" id="chat-app">
                <div id="chat-messages"></div>
                <div id="chat-input-area">
                    <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter')sendMessage()">
                    <button id="chat-send" onclick="sendMessage()">‚û§</button>
                </div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –°–æ–æ–±—â–µ–Ω–∏–π (Telegram-style) -->
        <div class="window" id="messages-window" style="top: 100px; left: 250px; width: 900px; height: 650px;">
            <div class="window-header">
                <div class="window-title">‚úâÔ∏è –°–æ–æ–±—â–µ–Ω–∏—è</div>
                <div class="window-controls">
                    <button class="minimize-btn" onclick="minimizeWindow('messages')">‚àí</button>
                    <button class="maximize-btn" onclick="maximizeWindow('messages')">‚ñ°</button>
                    <button class="close-btn" onclick="closeWindow('messages')">√ó</button>
                </div>
            </div>
            <div class="window-content" id="messages-app" style="padding: 0;">
                <div style="display: flex; height: 100%;">
                    <div class="chats-list" id="chats-list"></div>
                    <div class="chat-view" id="chat-view">
                        <div class="no-chat-selected">
                            <div class="icon">üí¨</div>
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–∞—Å–∫–æ—Ç -->
        <div class="mascot-container" id="mascot-container" onclick="toggleMascotChat()">
            <div class="mascot" id="mascot">ü§ñ</div>
            <div class="mascot-bubble">üí¨ –ù–∞–∂–º–∏ —á—Ç–æ–±—ã –ø–æ–æ–±—â–∞—Ç—å—Å—è!</div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –∑–∞–¥–∞—á -->
    <div id="taskbar">
        <button id="start-button" onclick="toggleStartMenu()">‚ñ™ –ü—É—Å–∫</button>
        <div id="taskbar-apps"></div>
        <div id="clock">00:00</div>
        <button id="power-button" onclick="togglePowerMenu()">‚èª</button>
    </div>

    <!-- –ú–µ–Ω—é –ø–∏—Ç–∞–Ω–∏—è -->
    <div id="power-menu">
        <button class="power-menu-item" onclick="sleepMode()">
            <span class="icon">üò¥</span>
            <span>–°–ø—è—â–∏–π —Ä–µ–∂–∏–º</span>
        </button>
        <button class="power-menu-item" onclick="lockScreen()">
            <span class="icon">üîí</span>
            <span>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</span>
        </button>
        <button class="power-menu-item" onclick="restartSystem()">
            <span class="icon">üîÑ</span>
            <span>–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞</span>
        </button>
        <button class="power-menu-item" onclick="shutDown()">
            <span class="icon">‚èª</span>
            <span>–í—ã–∫–ª—é—á–∏—Ç—å</span>
        </button>
    </div>

    <!-- –ú–µ–Ω—é –ü—É—Å–∫ -->
    <div id="start-menu">
        <h2>üñ•Ô∏è Web OS</h2>
        <div class="menu-section">
            <h3>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
            <div class="menu-item" onclick="openApp('snake'); toggleStartMenu();">
                <span class="icon">üêç</span>
                <span>–ó–º–µ–π–∫–∞</span>
            </div>
            <div class="menu-item" onclick="openApp('duel'); toggleStartMenu();">
                <span class="icon">‚öîÔ∏è</span>
                <span>–î—É—ç–ª—å</span>
            </div>
            <div class="menu-item" onclick="openApp('emoji'); toggleStartMenu();">
                <span class="icon">üòÄ</span>
                <span>–°–º–∞–π–ª–∏–∫–∏</span>
            </div>
            <div class="menu-item" onclick="openApp('editor'); toggleStartMenu();">
                <span class="icon">üìù</span>
                <span>–†–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º</span>
            </div>
        </div>
        <div class="menu-section">
            <h3>–°–∏—Å—Ç–µ–º–∞</h3>
            <div class="menu-item" onclick="openApp('manager'); toggleStartMenu();">
                <span class="icon">üè™</span>
                <span>–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</span>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let openWindows = [];
        let dragOffset = { x: 0, y: 0 };
        let isDragging = false;
        let currentWindow = null;
        let isMobileMode = false;
        let deviceSelected = false;
        let isFirstRun = true;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
        if (localStorage.getItem('webOS_initialized')) {
            // –ë—ã–ª –∑–∞–ø—É—â–µ–Ω —Ä–∞–Ω–µ–µ - —Å—Ä–∞–∑—É –∑–∞–≥—Ä—É–∂–∞–µ–º
            isFirstRun = false;
            document.getElementById('mascot-welcome').style.display = 'none';
            if (localStorage.getItem('deviceType') === 'mobile') {
                isMobileMode = true;
                document.body.classList.add('mobile-mode');
            }
            deviceSelected = true;
            startBoot();
        } else {
            // –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∞—Å–∫–æ—Ç–∞, —Å–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            document.getElementById('mascot-welcome').style.display = 'flex';
            document.getElementById('boot-screen').style.display = 'none';
        }

        function startFromWelcome() {
            // –ê–Ω–∏–º–∞—Ü–∏—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
            const welcome = document.getElementById('mascot-welcome');
            welcome.style.animation = 'fadeOut 0.5s forwards';

            setTimeout(() => {
                welcome.style.display = 'none';
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω
                document.getElementById('boot-screen').style.display = 'flex';
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
                localStorage.setItem('webOS_initialized', 'true');
                localStorage.setItem('deviceType', 'pc');
                deviceSelected = true;
                startBoot();
            }, 500);
        }

        function startBoot() {
            updateBootScreen();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã
        let bootProgress = 0;
        let bootTime = 20;

        const bootMessages = [
            { progress: 5, message: '–ó–∞–≥—Ä—É–∑–∫–∞ —è–¥—Ä–∞...' },
            { progress: 10, message: '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è...' },
            { progress: 15, message: '–ó–∞–≥—Ä—É–∑–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–æ–≤...' },
            { progress: 25, message: '–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏...' },
            { progress: 35, message: '–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–ª—É–∂–±...' },
            { progress: 45, message: '–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã...' },
            { progress: 55, message: '–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞...' },
            { progress: 65, message: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏...' },
            { progress: 75, message: '–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π...' },
            { progress: 85, message: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞...' },
            { progress: 95, message: '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏...' }
        ];

        function updateBootScreen() {
            const progress = document.getElementById('loading-progress');
            const timer = document.getElementById('boot-timer');
            const status = document.getElementById('boot-status');

            progress.style.width = bootProgress + '%';
            timer.textContent = `–û—Å—Ç–∞–ª–æ—Å—å: ${bootTime} —Å–µ–∫—É–Ω–¥`;

            // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
            const currentStatus = bootMessages.find(msg => bootProgress >= msg.progress && bootProgress < msg.progress + 10);
            if (currentStatus) {
                status.textContent = currentStatus.message;
            }

            if (bootProgress < 100) {
                bootProgress += 5;
                bootTime = Math.max(0, 20 - Math.floor(bootProgress / 5));
                setTimeout(updateBootScreen, 200);
            } else {
                status.textContent = '–ì–æ—Ç–æ–≤–æ!';
                setTimeout(() => {
                    document.getElementById('boot-screen').style.display = 'none';
                    document.getElementById('desktop').style.display = 'block';
                    document.getElementById('desktop').classList.add('fade-in');
                    initializeOS();
                }, 500);
            }
        }

        function initializeOS() {
            updateClock();
            setInterval(updateClock, 1000);
            loadEmojiGallery();
            loadComicsGallery();
            updateLockScreenTime();
            setInterval(updateLockScreenTime, 1000);
            initChat();
            showNotification('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Web OS!');

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
            setTimeout(() => {
                initMessagesApp();
            }, 500);

            // –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é –ø–∏—Ç–∞–Ω–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', (e) => {
                const powerMenu = document.getElementById('power-menu');
                const powerBtn = document.getElementById('power-button');
                if (!powerMenu.contains(e.target) && !powerBtn.contains(e.target)) {
                    powerMenu.classList.remove('active');
                }
            });
        }

        function updateLockScreenTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];
            const months = ['–Ø–Ω–≤–∞—Ä—è', '–§–µ–≤—Ä–∞–ª—è', '–ú–∞—Ä—Ç–∞', '–ê–ø—Ä–µ–ª—è', '–ú–∞—è', '–ò—é–Ω—è', '–ò—é–ª—è', '–ê–≤–≥—É—Å—Ç–∞', '–°–µ–Ω—Ç—è–±—Ä—è', '–û–∫—Ç—è–±—Ä—è', '–ù–æ—è–±—Ä—è', '–î–µ–∫–∞–±—Ä—è'];

            const timeDisplay = document.getElementById('lock-time-display');
            const dateDisplay = document.getElementById('lock-date-display');

            if (timeDisplay) timeDisplay.textContent = `${hours}:${minutes}`;
            if (dateDisplay) dateDisplay.textContent = `${days[now.getDay()]}, ${now.getDate()} ${months[now.getMonth()]}`;
        }

        function togglePowerMenu() {
            const menu = document.getElementById('power-menu');
            menu.classList.toggle('active');
        }

        function shutDown() {
            document.getElementById('power-menu').classList.remove('active');

            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É?')) {
                // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è
                document.getElementById('desktop').classList.add('fade-out');
                document.getElementById('taskbar').classList.add('fade-out');

                setTimeout(() => {
                    // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –≤—ã–∫–ª—é—á–µ–Ω–∏—è
                    document.getElementById('shutdown-screen').classList.add('active');
                    document.getElementById('desktop').style.display = 'none';
                    document.getElementById('taskbar').style.display = 'none';
                    document.querySelectorAll('.window').forEach(w => w.style.display = 'none');
                }, 500);
            }
        }

        function turnOn() {
            // –°–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω –≤—ã–∫–ª—é—á–µ–Ω–∏—è
            document.getElementById('shutdown-screen').classList.remove('active');

            // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω
            document.getElementById('boot-screen').style.display = 'flex';
            document.getElementById('boot-screen').classList.add('fade-in');

            // –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
            bootProgress = 0;
            bootTime = 20;
            updateBootScreen();
        }

        function restartSystem() {
            document.getElementById('power-menu').classList.remove('active');

            if (confirm('–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É?')) {
                document.getElementById('desktop').classList.add('fade-out');
                document.getElementById('taskbar').classList.add('fade-out');

                setTimeout(() => {
                    location.reload();
                }, 500);
            }
        }

        function sleepMode() {
            document.getElementById('power-menu').classList.remove('active');

            // –ó–∞—Ç–µ–º–Ω–∏—Ç—å —ç–∫—Ä–∞–Ω
            document.body.style.transition = 'filter 0.5s ease';
            document.body.style.filter = 'brightness(0)';

            setTimeout(() => {
                showNotification('üí§ –°–ø—è—â–∏–π —Ä–µ–∂–∏–º - –Ω–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è');

                // –ü—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–º –Ω–∞–∂–∞—Ç–∏–∏
                const wakeUp = () => {
                    document.body.style.filter = 'brightness(1)';
                    showNotification('‚òÄÔ∏è –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ...');
                    document.removeEventListener('click', wakeUp);
                    document.removeEventListener('keydown', wakeUp);
                };

                setTimeout(() => {
                    document.addEventListener('click', wakeUp);
                    document.addEventListener('keydown', wakeUp);
                }, 1000);
            }, 500);
        }

        function lockScreen() {
            document.getElementById('power-menu').classList.remove('active');
            updateLockScreenTime();
            document.getElementById('lock-screen').classList.add('active');
        }

        function unlockScreen() {
            document.getElementById('lock-screen').classList.remove('active');
            showNotification('üîì –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞');
        }

        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('clock').textContent = `${hours}:${minutes}`;
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–∞–º–∏
        function openApp(appName) {
            const windowEl = document.getElementById(appName + '-window');
            if (windowEl) {
                windowEl.style.display = 'flex';
                if (!openWindows.includes(appName)) {
                    openWindows.push(appName);
                    updateTaskbar();
                }
                bringToFront(windowEl);

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
                if (appName === 'messages') {
                    setTimeout(() => initMessagesApp(), 100);
                }
            }
        }

        function closeWindow(appName) {
            const windowEl = document.getElementById(appName + '-window');
            if (windowEl) {
                windowEl.style.display = 'none';
                openWindows = openWindows.filter(w => w !== appName);
                updateTaskbar();
            }
        }

        function minimizeWindow(appName) {
            const windowEl = document.getElementById(appName + '-window');
            if (windowEl) {
                windowEl.style.display = 'none';
            }
        }

        function maximizeWindow(appName) {
            const windowEl = document.getElementById(appName + '-window');
            if (windowEl) {
                if (windowEl.dataset.maximized === 'true') {
                    windowEl.style.top = windowEl.dataset.originalTop;
                    windowEl.style.left = windowEl.dataset.originalLeft;
                    windowEl.style.width = windowEl.dataset.originalWidth;
                    windowEl.style.height = '';
                    windowEl.dataset.maximized = 'false';
                } else {
                    windowEl.dataset.originalTop = windowEl.style.top;
                    windowEl.dataset.originalLeft = windowEl.style.left;
                    windowEl.dataset.originalWidth = windowEl.style.width;
                    windowEl.style.top = '0';
                    windowEl.style.left = '0';
                    windowEl.style.width = '100%';
                    windowEl.style.height = 'calc(100vh - 50px)';
                    windowEl.dataset.maximized = 'true';
                }
            }
        }

        function bringToFront(windowEl) {
            document.querySelectorAll('.window').forEach(w => w.style.zIndex = 100);
            windowEl.style.zIndex = 200;
        }

        function updateTaskbar() {
            const taskbarApps = document.getElementById('taskbar-apps');
            taskbarApps.innerHTML = '';
            openWindows.forEach(app => {
                const btn = document.createElement('button');
                btn.className = 'taskbar-app';
                btn.textContent = getAppName(app);
                btn.onclick = () => openApp(app);
                taskbarApps.appendChild(btn);
            });
        }

        function getAppName(app) {
            const names = {
                'snake': 'üêç –ó–º–µ–π–∫–∞',
                'duel': '‚öîÔ∏è –î—É—ç–ª—å',
                'emoji': 'üòÄ –°–º–∞–π–ª–∏–∫–∏',
                'editor': 'üìù –†–µ–¥–∞–∫—Ç–æ—Ä',
                'manager': 'üè™ –ú–µ–Ω–µ–¥–∂–µ—Ä',
                'geometry': 'üî∫ –ì–µ–º–∏—Ç—Ä–∏–¥—à',
                'brawl': '‚≠ê –ë—Ä–∞–≤–ª –°—Ç–∞—Ä—Å',
                'pong': 'üèì –ü–∏–Ω–≥-–ü–æ–Ω–≥',
                'calculator': 'üî¢ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä',
                'calendar': 'üìÜ –ö–∞–ª–µ–Ω–¥–∞—Ä—å',
                'music': 'üé∂ –ú—É–∑—ã–∫–∞',
                'comics': 'üìö –ö–æ–º–∏–∫—Å—ã',
                'chat': 'üí¨ –ß–∞—Ç',
                'messages': '‚úâÔ∏è –°–æ–æ–±—â–µ–Ω–∏—è'
            };
            return names[app] || app;
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
        function updateManagerButtons() {
            const buttons = document.querySelectorAll('.download-btn');
            buttons.forEach(btn => {
                const onclickStr = btn.getAttribute('onclick');
                if (onclickStr) {
                    const match = onclickStr.match(/downloadApp\('([^']+)',\s*'([^']*)',\s*'([^']*)'\)/);
                    if (match) {
                        const app = match[1];
                        if (installedApps.includes(app)) {
                            btn.textContent = '‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ';
                            btn.classList.add('downloaded');
                            btn.disabled = true;
                        }
                    }
                }
            });
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º openApp —á—Ç–æ–±—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        const originalOpenApp = openApp;
        openApp = function(appName) {
            originalOpenApp(appName);
            if (appName === 'manager') {
                setTimeout(updateManagerButtons, 100);
            }
        };

        // –ú–µ–Ω—é –ü—É—Å–∫
        function toggleStartMenu() {
            const menu = document.getElementById('start-menu');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ü—É—Å–∫ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('start-menu');
            const startBtn = document.getElementById('start-button');
            if (!menu.contains(e.target) && !startBtn.contains(e.target)) {
                menu.style.display = 'none';
            }
        });

        // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –æ–∫–æ–Ω
        document.querySelectorAll('.window-header').forEach(header => {
            header.addEventListener('mousedown', (e) => {
                if (e.target.tagName === 'BUTTON') return;
                isDragging = true;
                currentWindow = header.parentElement;
                bringToFront(currentWindow);
                const rect = currentWindow.getBoundingClientRect();
                dragOffset.x = e.clientX - rect.left;
                dragOffset.y = e.clientY - rect.top;
            });
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging && currentWindow) {
                currentWindow.style.left = (e.clientX - dragOffset.x) + 'px';
                currentWindow.style.top = (e.clientY - dragOffset.y) + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            currentWindow = null;
        });

        // ============================================
        // –ò–ì–†–ê –ó–ú–ï–ô–ö–ê
        // ============================================
        let snakeCanvas, snakeCtx;
        let snake = [];
        let food = {};
        let direction = 'right';
        let snakeGameLoop;
        let snakeScore = 0;
        let snakeHighscore = localStorage.getItem('snakeHighscore') || 0;

        function startSnakeGame() {
            snakeCanvas = document.getElementById('snake-canvas');
            snakeCtx = snakeCanvas.getContext('2d');

            snake = [
                { x: 5, y: 10 },
                { x: 4, y: 10 },
                { x: 3, y: 10 }
            ];
            direction = 'right';
            snakeScore = 0;
            document.getElementById('snake-score').textContent = snakeScore;
            document.getElementById('snake-highscore').textContent = snakeHighscore;

            spawnFood();
            if (snakeGameLoop) clearInterval(snakeGameLoop);
            snakeGameLoop = setInterval(updateSnake, 100);

            document.addEventListener('keydown', handleSnakeInput);
        }

        function spawnFood() {
            const gridSize = 20;
            food = {
                x: Math.floor(Math.random() * (snakeCanvas.width / gridSize)),
                y: Math.floor(Math.random() * (snakeCanvas.height / gridSize))
            };
        }

        function handleSnakeInput(e) {
            const key = e.key.toLowerCase();
            if ((key === 'w' || key === 'arrowup') && direction !== 'down') direction = 'up';
            if ((key === 's' || key === 'arrowdown') && direction !== 'up') direction = 'down';
            if ((key === 'a' || key === 'arrowleft') && direction !== 'right') direction = 'left';
            if ((key === 'd' || key === 'arrowright') && direction !== 'left') direction = 'right';
        }

        function updateSnake() {
            const gridSize = 20;
            const head = { ...snake[0] };

            if (direction === 'up') head.y--;
            if (direction === 'down') head.y++;
            if (direction === 'left') head.x--;
            if (direction === 'right') head.x++;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ —Å—Ç–µ–Ω–æ–π
            if (head.x < 0 || head.x >= snakeCanvas.width / gridSize ||
                head.y < 0 || head.y >= snakeCanvas.height / gridSize ||
                snake.some(s => s.x === head.x && s.y === head.y)) {
                clearInterval(snakeGameLoop);
                if (snakeScore > snakeHighscore) {
                    snakeHighscore = snakeScore;
                    localStorage.setItem('snakeHighscore', snakeHighscore);
                    showNotification('üèÜ –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥: ' + snakeScore);
                } else {
                    showNotification('üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –°—á–µ—Ç: ' + snakeScore);
                }
                return;
            }

            snake.unshift(head);

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –µ–¥—ã
            if (head.x === food.x && head.y === food.y) {
                snakeScore += 10;
                document.getElementById('snake-score').textContent = snakeScore;
                spawnFood();
            } else {
                snake.pop();
            }

            drawSnake();
        }

        function drawSnake() {
            const gridSize = 20;
            snakeCtx.fillStyle = '#1a1a2e';
            snakeCtx.fillRect(0, 0, snakeCanvas.width, snakeCanvas.height);

            // –ï–¥–∞
            snakeCtx.fillStyle = '#ff5f57';
            snakeCtx.beginPath();
            snakeCtx.arc(food.x * gridSize + gridSize/2, food.y * gridSize + gridSize/2, gridSize/2 - 2, 0, Math.PI * 2);
            snakeCtx.fill();

            // –ó–º–µ–π–∫–∞
            snake.forEach((segment, index) => {
                const gradient = snakeCtx.createLinearGradient(
                    segment.x * gridSize, segment.y * gridSize,
                    (segment.x + 1) * gridSize, (segment.y + 1) * gridSize
                );
                if (index === 0) {
                    gradient.addColorStop(0, '#667eea');
                    gradient.addColorStop(1, '#764ba2');
                } else {
                    gradient.addColorStop(0, '#00d2ff');
                    gradient.addColorStop(1, '#3a7bd5');
                }
                snakeCtx.fillStyle = gradient;
                snakeCtx.fillRect(segment.x * gridSize + 1, segment.y * gridSize + 1, gridSize - 2, gridSize - 2);
            });
        }

        // ============================================
        // –ò–ì–†–ê –î–£–≠–õ–¨
        // ============================================
        let duelCanvas, duelCtx;
        let player = { x: 100, y: 200, width: 40, height: 60, health: 10, maxHealth: 10 };
        let bot = { x: 460, y: 200, width: 40, height: 60, health: 10, maxHealth: 10 };
        let duelKeys = {};
        let duelGameLoop;
        let duelScore = 0;
        let playerAttacking = false;
        let attackCooldown = 0;

        function startDuelGame() {
            duelCanvas = document.getElementById('duel-canvas');
            duelCtx = duelCanvas.getContext('2d');

            player = { x: 100, y: 200, width: 40, height: 60, health: 10, maxHealth: 10 };
            bot = { x: 460, y: 200, width: 40, height: 60, health: 10, maxHealth: 10 };
            duelScore = 0;
            document.getElementById('duel-score').textContent = duelScore;
            updateHealthBars();

            if (duelGameLoop) cancelAnimationFrame(duelGameLoop);
            document.addEventListener('keydown', (e) => duelKeys[e.key.toLowerCase()] = true);
            document.addEventListener('keyup', (e) => duelKeys[e.key.toLowerCase()] = false);
            duelCanvas.addEventListener('click', playerAttack);

            updateDuel();
        }

        function playerAttack(e) {
            if (attackCooldown > 0 || playerAttacking) return;

            playerAttacking = true;
            attackCooldown = 30;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è
            const dx = bot.x - player.x;
            const dy = bot.y - player.y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 80) {
                bot.health--;
                showDamage(bot.x, bot.y);
                updateHealthBars();

                if (bot.health <= 0) {
                    duelScore++;
                    document.getElementById('duel-score').textContent = duelScore;
                    showNotification('üéØ –ë–æ—Ç –ø–æ–±–µ–∂–¥–µ–Ω! +1 –æ—á–∫–æ');
                    respawnBot();
                }
            }

            setTimeout(() => playerAttacking = false, 200);
        }

        function respawnBot() {
            bot.health = bot.maxHealth;
            bot.x = 400 + Math.random() * 150;
            bot.y = 100 + Math.random() * 200;
            updateHealthBars();
        }

        function botAttack() {
            const dx = player.x - bot.x;
            const dy = player.y - bot.y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 60 && Math.random() < 0.02) {
                player.health--;
                showDamage(player.x, player.y);
                updateHealthBars();

                if (player.health <= 0) {
                    showNotification('üíÄ –í–∞—Å –ø–æ–±–µ–¥–∏–ª–∏! –û—á–∫–æ–≤: ' + duelScore);
                    player.health = player.maxHealth;
                    duelScore = 0;
                    document.getElementById('duel-score').textContent = duelScore;
                    updateHealthBars();
                }
            }
        }

        function showDamage(x, y) {
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è
            duelCtx.fillStyle = 'rgba(255, 0, 0, 0.5)';
            duelCtx.beginPath();
            duelCtx.arc(x + 20, y + 30, 30, 0, Math.PI * 2);
            duelCtx.fill();
        }

        function updateHealthBars() {
            document.getElementById('player-health').style.width = (player.health / player.maxHealth * 100) + '%';
            document.getElementById('bot-health').style.width = (bot.health / bot.maxHealth * 100) + '%';
        }

        function updateDuel() {
            const speed = 4;

            // –î–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
            if (duelKeys['w']) player.y = Math.max(0, player.y - speed);
            if (duelKeys['s']) player.y = Math.min(duelCanvas.height - player.height, player.y + speed);
            if (duelKeys['a']) player.x = Math.max(0, player.x - speed);
            if (duelKeys['d']) player.x = Math.min(duelCanvas.width - player.width, player.x + speed);

            // –ò–ò –±–æ—Ç–∞
            const dx = player.x - bot.x;
            const dy = player.y - bot.y;
            const botSpeed = 2;

            if (Math.abs(dx) > 50) {
                if (dx > 0) bot.x += botSpeed;
                else bot.x -= botSpeed;
            }
            if (Math.abs(dy) > 10) {
                if (dy > 0) bot.y += botSpeed;
                else bot.y -= botSpeed;
            }

            botAttack();

            if (attackCooldown > 0) attackCooldown--;

            drawDuel();
            duelGameLoop = requestAnimationFrame(updateDuel);
        }

        function drawDuel() {
            // –§–æ–Ω
            const gradient = duelCtx.createLinearGradient(0, 0, 0, duelCanvas.height);
            gradient.addColorStop(0, '#2d1b4e');
            gradient.addColorStop(1, '#1a1a2e');
            duelCtx.fillStyle = gradient;
            duelCtx.fillRect(0, 0, duelCanvas.width, duelCanvas.height);

            // –ò–≥—Ä–æ–∫
            const playerGradient = duelCtx.createLinearGradient(player.x, player.y, player.x + player.width, player.y + player.height);
            playerGradient.addColorStop(0, '#667eea');
            playerGradient.addColorStop(1, '#764ba2');
            duelCtx.fillStyle = playerGradient;
            duelCtx.fillRect(player.x, player.y, player.width, player.height);

            // –≠—Ñ—Ñ–µ–∫—Ç –∞—Ç–∞–∫–∏ –∏–≥—Ä–æ–∫–∞
            if (playerAttacking) {
                duelCtx.strokeStyle = '#ff5f57';
                duelCtx.lineWidth = 3;
                duelCtx.beginPath();
                duelCtx.arc(player.x + player.width/2, player.y + player.height/2, 50, 0, Math.PI * 2);
                duelCtx.stroke();
            }

            // –ë–æ—Ç
            const botGradient = duelCtx.createLinearGradient(bot.x, bot.y, bot.x + bot.width, bot.y + bot.height);
            botGradient.addColorStop(0, '#ff5f57');
            botGradient.addColorStop(1, '#ffbd2e');
            duelCtx.fillStyle = botGradient;
            duelCtx.fillRect(bot.x, bot.y, bot.width, bot.height);
        }

        // ============================================
        // –ì–ê–õ–ï–†–ï–Ø –°–ú–ê–ô–õ–ò–ö–û–í
        // ============================================
        function loadEmojiGallery() {
            const grid = document.getElementById('emoji-grid');
            const emojis = [
                'üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÜ', 'üòÖ', 'ü§£', 'üòÇ',
                'üôÇ', 'üôÉ', 'üòâ', 'üòä', 'üòá', 'ü•∞', 'üòç', 'ü§©',
                'üòò', 'üòó', 'üòö', 'üòô', 'üòã', 'üòõ', 'üòú', 'ü§™',
                'üòù', 'ü§ë', 'ü§ó', 'ü§≠', 'ü§´', 'ü§î', 'ü§ê', 'ü§®',
                'üòê', 'üòë', 'üò∂', 'üòè', 'üòí', 'üôÑ', 'üò¨', 'ü§•',
                'üòå', 'üòî', 'üò™', 'ü§§', 'üò¥', 'üò∑', 'ü§í', 'ü§ï',
                'ü§¢', 'ü§Æ', 'ü§ß', 'ü•µ', 'ü•∂', 'üò∂‚Äçüå´Ô∏è', 'ü•¥', 'üòµ',
                'ü§Ø', 'ü§†', 'ü•≥', 'üòé', 'ü§ì', 'üßê', 'üòï', 'üòü',
                'üôÅ', 'üòÆ', 'üòØ', 'üò≤', 'üò≥', 'ü•∫', 'üò¶', 'üòß',
                'üò®', 'üò∞', 'üò•', 'üò¢', 'üò≠', 'üò±', 'üòñ', 'üò£',
                'üòû', 'üòì', 'üò©', 'üò´', 'ü•±', 'üò§', 'üò°', 'üò†',
                'ü§¨', 'üëç', 'üëé', 'üëä', '‚úä', 'ü§õ', 'ü§ú', 'ü§û',
                'üëã', 'ü§ö', 'üñêÔ∏è', '‚úã', 'üññ', 'üëè', 'üôå', 'üëê',
                'ü§≤', 'ü§ù', 'üôè', '‚úçÔ∏è', 'üí™', 'ü¶æ', 'ü¶ø', 'ü¶µ',
                'ü¶∂', 'üëÇ', 'ü¶ª', 'üëÉ', 'üß†', 'ü´Ä', 'ü´Å', 'ü¶∑',
                'ü¶¥', 'üëÄ', 'üëÅÔ∏è', 'üëÖ', 'üëÑ', 'üë∂', 'üßí', 'üë¶'
            ];

            emojis.forEach(emoji => {
                const item = document.createElement('div');
                item.className = 'emoji-item';
                item.textContent = emoji;
                item.onclick = () => {
                    navigator.clipboard.writeText(emoji);
                    showNotification('üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: ' + emoji);
                };
                grid.appendChild(item);
            });
        }

        // ============================================
        // –†–ï–î–ê–ö–¢–û–† –ü–†–û–ì–†–ê–ú–ú
        // ============================================
        function runProgram() {
            const code = document.getElementById('program-code').value;
            try {
                eval(code);
                showNotification('‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!');
            } catch (error) {
                showNotification('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        function saveProgram() {
            const code = document.getElementById('program-code').value;
            localStorage.setItem('savedProgram', code);
            showNotification('üíæ –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        function clearProgram() {
            document.getElementById('program-code').value = '';
        }

        // ============================================
        // –ò–ì–†–ê GEOMETRY DASH
        // ============================================
        let geoCanvas, geoCtx;
        let geoPlayer = { x: 50, y: 200, width: 40, height: 40, velocityY: 0, onGround: false };
        let geoObstacles = [];
        let geoGameLoop;
        let geoScore = 0;
        let geoHighscore = localStorage.getItem('geoHighscore') || 0;
        let geoAttempt = 1;
        let geoGameSpeed = 5;
        const gravity = 0.6;
        const jumpForce = -12;

        function startGeometryGame() {
            geoCanvas = document.getElementById('geometry-canvas');
            geoCtx = geoCanvas.getContext('2d');

            geoPlayer = { x: 50, y: 200, width: 40, height: 40, velocityY: 0, onGround: false };
            geoObstacles = [];
            geoScore = 0;
            geoGameSpeed = 5;
            document.getElementById('geometry-score').textContent = geoScore;
            document.getElementById('geometry-highscore').textContent = geoHighscore;
            document.getElementById('geometry-attempt').textContent = geoAttempt;

            if (geoGameLoop) cancelAnimationFrame(geoGameLoop);

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä—ã–∂–∫–∞
            const jumpHandler = (e) => {
                if ((e.code === 'Space' || e.type === 'click') && geoPlayer.onGround) {
                    geoPlayer.velocityY = jumpForce;
                    geoPlayer.onGround = false;
                    e.preventDefault();
                }
            };

            document.addEventListener('keydown', jumpHandler);
            geoCanvas.addEventListener('click', jumpHandler);

            updateGeometry();
        }

        function updateGeometry() {
            // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
            geoPlayer.velocityY += gravity;
            geoPlayer.y += geoPlayer.velocityY;

            // –ó–µ–º–ª—è
            if (geoPlayer.y >= 220) {
                geoPlayer.y = 220;
                geoPlayer.velocityY = 0;
                geoPlayer.onGround = true;
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
            if (Math.random() < 0.02) {
                const type = Math.random() > 0.5 ? 'spike' : 'block';
                geoObstacles.push({
                    x: geoCanvas.width,
                    y: type === 'spike' ? 230 : 200,
                    width: 30,
                    height: type === 'spike' ? 40 : 60,
                    type: type
                });
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
            geoObstacles.forEach((obs, index) => {
                obs.x -= geoGameSpeed;

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
                if (geoPlayer.x < obs.x + obs.width &&
                    geoPlayer.x + geoPlayer.width > obs.x &&
                    geoPlayer.y < obs.y + obs.height &&
                    geoPlayer.y + geoPlayer.height > obs.y) {

                    // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ!
                    cancelAnimationFrame(geoGameLoop);
                    geoAttempt++;
                    showNotification('üí• –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ! –ü–æ–ø—ã—Ç–∫–∞ ' + geoAttempt);

                    if (geoScore > geoHighscore) {
                        geoHighscore = geoScore;
                        localStorage.setItem('geoHighscore', geoHighscore);
                        showNotification('üèÜ –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥: ' + geoScore);
                    }

                    return;
                }

                // –û—á–∫–∏ –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ
                if (obs.x + obs.width < geoPlayer.x && !obs.passed) {
                    obs.passed = true;
                    geoScore += 10;
                    document.getElementById('geometry-score').textContent = geoScore;
                }
            });

            // –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∑–∞ —ç–∫—Ä–∞–Ω–æ–º
            geoObstacles = geoObstacles.filter(obs => obs.x > -50);

            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
            if (geoScore > 0 && geoScore % 100 === 0) {
                geoGameSpeed = Math.min(10, 5 + geoScore / 200);
            }

            drawGeometry();
            geoGameLoop = requestAnimationFrame(updateGeometry);
        }

        function drawGeometry() {
            // –§–æ–Ω
            const gradient = geoCtx.createLinearGradient(0, 0, 0, geoCanvas.height);
            gradient.addColorStop(0, '#1a1a2e');
            gradient.addColorStop(1, '#16213e');
            geoCtx.fillStyle = gradient;
            geoCtx.fillRect(0, 0, geoCanvas.width, geoCanvas.height);

            // –ó–µ–º–ª—è
            geoCtx.fillStyle = '#0f3460';
            geoCtx.fillRect(0, 260, geoCanvas.width, 40);

            // –ò–≥—Ä–æ–∫ (–∫—É–±)
            const playerGradient = geoCtx.createLinearGradient(geoPlayer.x, geoPlayer.y, geoPlayer.x + geoPlayer.width, geoPlayer.y + geoPlayer.height);
            playerGradient.addColorStop(0, '#ff6b6b');
            playerGradient.addColorStop(1, '#feca57');
            geoCtx.fillStyle = playerGradient;
            geoCtx.fillRect(geoPlayer.x, geoPlayer.y, geoPlayer.width, geoPlayer.height);

            // –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            geoObstacles.forEach(obs => {
                if (obs.type === 'spike') {
                    // –®–∏–ø (—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫)
                    geoCtx.fillStyle = '#e74c3c';
                    geoCtx.beginPath();
                    geoCtx.moveTo(obs.x, obs.y + obs.height);
                    geoCtx.lineTo(obs.x + obs.width / 2, obs.y);
                    geoCtx.lineTo(obs.x + obs.width, obs.y + obs.height);
                    geoCtx.closePath();
                    geoCtx.fill();
                } else {
                    // –ë–ª–æ–∫
                    geoCtx.fillStyle = '#95a5a6';
                    geoCtx.fillRect(obs.x, obs.y, obs.width, obs.height);
                }
            });
        }

        // ============================================
        // –ò–ì–†–ê BRAWL STARS
        // ============================================
        let brawlCanvas, brawlCtx;
        let brawlPlayer = { x: 100, y: 200, width: 35, height: 35, health: 5, maxHealth: 5 };
        let brawlBot = { x: 600, y: 200, width: 35, height: 35, health: 5, maxHealth: 5 };
        let brawlBullets = [];
        let brawlBotBullets = [];
        let brawlKeys = {};
        let brawlGameLoop;
        let brawlPlayerScore = 0;
        let brawlBotScore = 0;
        let brawlShootCooldown = 0;
        let brawlBotShootCooldown = 0;

        function startBrawlGame() {
            brawlCanvas = document.getElementById('brawl-canvas');
            brawlCtx = brawlCanvas.getContext('2d');

            brawlPlayer = { x: 100, y: 200, width: 35, height: 35, health: 5, maxHealth: 5 };
            brawlBot = { x: 600, y: 200, width: 35, height: 35, health: 5, maxHealth: 5 };
            brawlBullets = [];
            brawlBotBullets = [];
            brawlPlayerScore = 0;
            brawlBotScore = 0;
            document.getElementById('brawl-score').textContent = brawlPlayerScore;
            document.getElementById('brawl-bots').textContent = brawlBotScore;
            updateBrawlHealthBars();

            if (brawlGameLoop) cancelAnimationFrame(brawlGameLoop);

            document.addEventListener('keydown', (e) => brawlKeys[e.key.toLowerCase()] = true);
            document.addEventListener('keyup', (e) => brawlKeys[e.key.toLowerCase()] = false);
            brawlCanvas.addEventListener('click', brawlShoot);

            updateBrawl();
        }

        function brawlShoot(e) {
            if (brawlShootCooldown > 0) return;

            const rect = brawlCanvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            const angle = Math.atan2(mouseY - (brawlPlayer.y + brawlPlayer.height/2),
                                    mouseX - (brawlPlayer.x + brawlPlayer.width/2));

            brawlBullets.push({
                x: brawlPlayer.x + brawlPlayer.width/2,
                y: brawlPlayer.y + brawlPlayer.height/2,
                vx: Math.cos(angle) * 10,
                vy: Math.sin(angle) * 10,
                radius: 6
            });

            brawlShootCooldown = 15;
        }

        function botShoot() {
            if (brawlBotShootCooldown > 0) return;

            const angle = Math.atan2(brawlPlayer.y - brawlBot.y, brawlPlayer.x - brawlBot.x);

            brawlBotBullets.push({
                x: brawlBot.x + brawlBot.width/2,
                y: brawlBot.y + brawlBot.height/2,
                vx: Math.cos(angle) * 8,
                vy: Math.sin(angle) * 8,
                radius: 6
            });

            brawlBotShootCooldown = 40;
        }

        function updateBrawlHealthBars() {
            document.getElementById('brawl-p1-health').style.width = (brawlPlayer.health / brawlPlayer.maxHealth * 100) + '%';
            document.getElementById('brawl-bot-health').style.width = (brawlBot.health / brawlBot.maxHealth * 100) + '%';
        }

        function respawnBrawlPlayer() {
            brawlPlayer.health = brawlPlayer.maxHealth;
            brawlPlayer.x = 100;
            brawlPlayer.y = 200;
            brawlBullets = [];
            updateBrawlHealthBars();
        }

        function respawnBrawlBot() {
            brawlBot.health = brawlBot.maxHealth;
            brawlBot.x = 600 + Math.random() * 100;
            brawlBot.y = 100 + Math.random() * 250;
            brawlBotBullets = [];
            updateBrawlHealthBars();
        }

        function updateBrawl() {
            const speed = 5;

            // –î–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
            if (brawlKeys['w']) brawlPlayer.y = Math.max(0, brawlPlayer.y - speed);
            if (brawlKeys['s']) brawlPlayer.y = Math.min(brawlCanvas.height - brawlPlayer.height, brawlPlayer.y + speed);
            if (brawlKeys['a']) brawlPlayer.x = Math.max(0, brawlPlayer.x - speed);
            if (brawlKeys['d']) brawlPlayer.x = Math.min(brawlCanvas.width - brawlPlayer.width, brawlPlayer.x + speed);

            // –ò–ò –±–æ—Ç–∞ - –¥–≤–∏–∂–µ–Ω–∏–µ
            const dx = brawlPlayer.x - brawlBot.x;
            const dy = brawlPlayer.y - brawlBot.y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance > 200) {
                const botSpeed = 2;
                if (dx > 0) brawlBot.x += botSpeed;
                else brawlBot.x -= botSpeed;
                if (dy > 0) brawlBot.y += botSpeed * 0.5;
                else brawlBot.y -= botSpeed * 0.5;
            }

            // –ë–æ—Ç —Å—Ç—Ä–µ–ª—è–µ—Ç
            if (distance < 400) {
                botShoot();
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É–ª—å –∏–≥—Ä–æ–∫–∞
            brawlBullets.forEach((bullet, index) => {
                bullet.x += bullet.vx;
                bullet.y += bullet.vy;

                // –ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –±–æ—Ç–∞
                const distToBot = Math.sqrt((bullet.x - brawlBot.x) ** 2 + (bullet.y - brawlBot.y) ** 2);
                if (distToBot < 30) {
                    brawlBot.health--;
                    brawlBullets.splice(index, 1);
                    updateBrawlHealthBars();

                    if (brawlBot.health <= 0) {
                        brawlPlayerScore++;
                        document.getElementById('brawl-score').textContent = brawlPlayerScore;
                        showNotification('üéØ –í—ã —É–±–∏–ª–∏ –±–æ—Ç–∞! ' + brawlPlayerScore + ' - ' + brawlBotScore);
                        respawnBrawlBot();

                        if (brawlPlayerScore >= 3) {
                            showNotification('üèÜ –í–´ –ü–û–ë–ï–î–ò–õ–ò! ' + brawlPlayerScore + ' - ' + brawlBotScore);
                            setTimeout(() => {
                                brawlPlayerScore = 0;
                                brawlBotScore = 0;
                                document.getElementById('brawl-score').textContent = 0;
                                document.getElementById('brawl-bots').textContent = 0;
                                respawnBrawlPlayer();
                                respawnBrawlBot();
                            }, 2000);
                        }
                    }
                }

                // –£–¥–∞–ª–µ–Ω–∏–µ –ø—É–ª—å –∑–∞ —ç–∫—Ä–∞–Ω–æ–º
                if (bullet.x < 0 || bullet.x > brawlCanvas.width || bullet.y < 0 || bullet.y > brawlCanvas.height) {
                    brawlBullets.splice(index, 1);
                }
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É–ª—å –±–æ—Ç–∞
            brawlBotBullets.forEach((bullet, index) => {
                bullet.x += bullet.vx;
                bullet.y += bullet.vy;

                // –ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –∏–≥—Ä–æ–∫–∞
                const distToPlayer = Math.sqrt((bullet.x - brawlPlayer.x) ** 2 + (bullet.y - brawlPlayer.y) ** 2);
                if (distToPlayer < 30) {
                    brawlPlayer.health--;
                    brawlBotBullets.splice(index, 1);
                    updateBrawlHealthBars();

                    if (brawlPlayer.health <= 0) {
                        brawlBotScore++;
                        document.getElementById('brawl-bots').textContent = brawlBotScore;
                        showNotification('üíÄ –í–∞—Å —É–±–∏–ª–∏! ' + brawlPlayerScore + ' - ' + brawlBotScore);
                        respawnBrawlPlayer();

                        if (brawlBotScore >= 3) {
                            showNotification('üò¢ –í–´ –ü–†–û–ò–ì–†–ê–õ–ò! ' + brawlPlayerScore + ' - ' + brawlBotScore);
                            setTimeout(() => {
                                brawlPlayerScore = 0;
                                brawlBotScore = 0;
                                document.getElementById('brawl-score').textContent = 0;
                                document.getElementById('brawl-bots').textContent = 0;
                                respawnBrawlPlayer();
                                respawnBrawlBot();
                            }, 2000);
                        }
                    }
                }

                // –£–¥–∞–ª–µ–Ω–∏–µ –ø—É–ª—å –∑–∞ —ç–∫—Ä–∞–Ω–æ–º
                if (bullet.x < 0 || bullet.x > brawlCanvas.width || bullet.y < 0 || bullet.y > brawlCanvas.height) {
                    brawlBotBullets.splice(index, 1);
                }
            });

            // –ö—É–ª–¥–∞—É–Ω—ã
            if (brawlShootCooldown > 0) brawlShootCooldown--;
            if (brawlBotShootCooldown > 0) brawlBotShootCooldown--;

            drawBrawl();
            brawlGameLoop = requestAnimationFrame(updateBrawl);
        }

        function drawBrawl() {
            // –§–æ–Ω
            const gradient = brawlCtx.createLinearGradient(0, 0, 0, brawlCanvas.height);
            gradient.addColorStop(0, '#2d3436');
            gradient.addColorStop(1, '#000000');
            brawlCtx.fillStyle = gradient;
            brawlCtx.fillRect(0, 0, brawlCanvas.width, brawlCanvas.height);

            // –°–µ—Ç–∫–∞
            brawlCtx.strokeStyle = 'rgba(255,255,255,0.05)';
            brawlCtx.lineWidth = 1;
            for (let i = 0; i < brawlCanvas.width; i += 50) {
                brawlCtx.beginPath();
                brawlCtx.moveTo(i, 0);
                brawlCtx.lineTo(i, brawlCanvas.height);
                brawlCtx.stroke();
            }
            for (let i = 0; i < brawlCanvas.height; i += 50) {
                brawlCtx.beginPath();
                brawlCtx.moveTo(0, i);
                brawlCtx.lineTo(brawlCanvas.width, i);
                brawlCtx.stroke();
            }

            // –ò–≥—Ä–æ–∫
            const playerGradient = brawlCtx.createRadialGradient(
                brawlPlayer.x + brawlPlayer.width/2, brawlPlayer.y + brawlPlayer.height/2, 0,
                brawlPlayer.x + brawlPlayer.width/2, brawlPlayer.y + brawlPlayer.height/2, 25
            );
            playerGradient.addColorStop(0, '#667eea');
            playerGradient.addColorStop(1, '#764ba2');
            brawlCtx.fillStyle = playerGradient;
            brawlCtx.beginPath();
            brawlCtx.arc(brawlPlayer.x + brawlPlayer.width/2, brawlPlayer.y + brawlPlayer.height/2, 20, 0, Math.PI * 2);
            brawlCtx.fill();

            // –ë–æ—Ç
            const botGradient = brawlCtx.createRadialGradient(
                brawlBot.x + brawlBot.width/2, brawlBot.y + brawlBot.height/2, 0,
                brawlBot.x + brawlBot.width/2, brawlBot.y + brawlBot.height/2, 25
            );
            botGradient.addColorStop(0, '#ff6b6b');
            botGradient.addColorStop(1, '#ee5a24');
            brawlCtx.fillStyle = botGradient;
            brawlCtx.beginPath();
            brawlCtx.arc(brawlBot.x + brawlBot.width/2, brawlBot.y + brawlBot.height/2, 20, 0, Math.PI * 2);
            brawlCtx.fill();

            // –ü—É–ª–∏ –∏–≥—Ä–æ–∫–∞
            brawlBullets.forEach(bullet => {
                brawlCtx.fillStyle = '#00cec9';
                brawlCtx.beginPath();
                brawlCtx.arc(bullet.x, bullet.y, bullet.radius, 0, Math.PI * 2);
                brawlCtx.fill();

                // –°–≤–µ—á–µ–Ω–∏–µ
                brawlCtx.shadowColor = '#00cec9';
                brawlCtx.shadowBlur = 10;
                brawlCtx.fill();
                brawlCtx.shadowBlur = 0;
            });

            // –ü—É–ª–∏ –±–æ—Ç–∞
            brawlBotBullets.forEach(bullet => {
                brawlCtx.fillStyle = '#ff6b6b';
                brawlCtx.beginPath();
                brawlCtx.arc(bullet.x, bullet.y, bullet.radius, 0, Math.PI * 2);
                brawlCtx.fill();

                // –°–≤–µ—á–µ–Ω–∏–µ
                brawlCtx.shadowColor = '#ff6b6b';
                brawlCtx.shadowBlur = 10;
                brawlCtx.fill();
                brawlCtx.shadowBlur = 0;
            });
        }

        // ============================================
        // –ú–ï–ù–ï–î–ñ–ï–† –ü–†–ò–õ–û–ñ–ï–ù–ò–ô
        // ============================================
        let installedApps = ['snake', 'duel', 'emoji', 'editor', 'manager', 'comics', 'chat', 'messages'];

        function downloadApp(app, icon, name) {
            if (installedApps.includes(app)) {
                showNotification('‚ö†Ô∏è –£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!');
                return;
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification('‚è≥ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ ' + name + '...');

            // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –µ—ë
            const buttons = document.querySelectorAll('.download-btn');
            let targetBtn = null;
            buttons.forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes(`'${app}'`)) {
                    targetBtn = btn;
                }
            });

            if (targetBtn) {
                targetBtn.textContent = '‚è≥ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ...';
                targetBtn.disabled = true;
            }

            setTimeout(() => {
                installedApps.push(app);
                showNotification('‚úÖ ' + name + ' —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!');

                if (targetBtn) {
                    targetBtn.textContent = '‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ';
                    targetBtn.classList.add('downloaded');
                }

                // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª
                addDesktopIcon(app, icon, name);

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
                if (!document.getElementById(app + '-window')) {
                    createAppWindow(app, icon, name);
                }
            }, 2000);
        }

        function addDesktopIcon(app, icon, name) {
            const desktop = document.getElementById('desktop');
            const existingIcons = document.querySelectorAll('.desktop-icon');
            const existingIconsCount = existingIcons.length;

            // –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Å —É—á–µ—Ç–æ–ºÂ∑≤Êúâ –∏–∫–æ–Ω–æ–∫
            let topPos = 20;
            let leftPos = 20;

            // –†–∞—Å—Å—Ç–∞–≤–ª—è–µ–º –≤ —Å–µ—Ç–∫—É 4x4
            const col = existingIconsCount % 4;
            const row = Math.floor(existingIconsCount / 4);

            topPos = 20 + (row * 130);
            leftPos = 20 + (col * 120);

            const iconDiv = document.createElement('div');
            iconDiv.className = 'desktop-icon';
            iconDiv.style.top = topPos + 'px';
            iconDiv.style.left = leftPos + 'px';
            iconDiv.onclick = () => openApp(app);
            iconDiv.innerHTML = `
                <div class="icon">${icon}</div>
                <div class="label">${name}</div>
            `;

            // –í—Å—Ç–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –æ–∫–Ω–æ–º
            const firstWindow = desktop.querySelector('.window');
            if (firstWindow) {
                desktop.insertBefore(iconDiv, firstWindow);
            } else {
                desktop.appendChild(iconDiv);
            }
        }

        function createAppWindow(app, icon, name) {
            // –°–æ–∑–¥–∞–µ–º –æ–∫–Ω–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            const desktop = document.getElementById('desktop');

            const windowDiv = document.createElement('div');
            windowDiv.className = 'window';
            windowDiv.id = app + '-window';
            windowDiv.style.top = '100px';
            windowDiv.style.left = '200px';
            windowDiv.style.width = '500px';
            windowDiv.style.height = '400px';

            windowDiv.innerHTML = `
                <div class="window-header">
                    <div class="window-title">${icon} ${name}</div>
                    <div class="window-controls">
                        <button class="minimize-btn" onclick="minimizeWindow('${app}')">‚àí</button>
                        <button class="maximize-btn" onclick="maximizeWindow('${app}')">‚ñ°</button>
                        <button class="close-btn" onclick="closeWindow('${app}')">√ó</button>
                    </div>
                </div>
                <div class="window-content">
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 64px; margin-bottom: 20px;">${icon}</div>
                        <h2>${name}</h2>
                        <p style="opacity: 0.7; margin-top: 10px;">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!</p>
                        <p style="opacity: 0.5; font-size: 14px; margin-top: 20px;">–°–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</p>
                    </div>
                </div>
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            desktop.appendChild(windowDiv);
        }

        // ============================================
        // –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
        // ============================================
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }

        // ============================================
        // –ö–û–ú–ò–ö–°–´
        // ============================================
        const comicsData = [
            {
                id: 1,
                title: "–°—É–ø–µ—Ä–≥–µ—Ä–æ–π",
                icon: "ü¶∏",
                description: "–ò—Å—Ç–æ—Ä–∏—è –æ –æ–±—ã—á–Ω–æ–º –ø–∞—Ä–Ω–µ, —Å—Ç–∞–≤—à–µ–º —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–º",
                pages: [
                    "–û–¥–Ω–∞–∂–¥—ã –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–µ–Ω—å –ø–æ –∏–º–µ–Ω–∏ –ê–ª–µ–∫—Å —à–µ–ª –ø–æ —É–ª–∏—Ü–µ –∏ –≤–¥—Ä—É–≥ —É–≤–∏–¥–µ–ª –ø–∞–¥–∞—é—â—É—é –º–µ—Ç–µ–æ—Ä–∏—Ç—É...",
                    "–ú–µ—Ç–µ–æ—Ä–∏—Ç —É–¥–∞—Ä–∏–ª—Å—è —Ä—è–¥–æ–º —Å –Ω–∏–º! –ê–ª–µ–∫—Å –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª, –Ω–æ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å—Ç—Ä–∞–Ω–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é...",
                    "–í–¥—Ä—É–≥ –æ–Ω –ø–æ–Ω—è–ª, —á—Ç–æ –º–æ–∂–µ—Ç –ª–µ—Ç–∞—Ç—å! –ï–≥–æ —Ç–µ–ª–æ —Å—Ç–∞–ª–æ —Å–∏–ª—å–Ω—ã–º, –∞ —Å–∫–æ—Ä–æ—Å—Ç—å - –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–π!",
                    "–ê–ª–µ–∫—Å —Ä–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Å–∏–ª—ã –¥–ª—è –¥–æ–±—Ä–∞. –û–Ω —Å—Ç–∞–ª —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–º –∏ –∑–∞—â–∏—â–∞—Ç—å –≥–æ—Ä–æ–¥!",
                    "–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –æ–Ω —Å–ø–∞—Å–∞–µ—Ç –ª—é–¥–µ–π –∏ –±–æ—Ä–µ—Ç—Å—è —Å–æ –∑–ª–æ–º. –ö–æ–Ω–µ—Ü –ø–µ—Ä–≤–æ–π –≥–ª–∞–≤—ã!"
                ]
            },
            {
                id: 2,
                title: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è",
                icon: "üöÄ",
                description: "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ –≥–∞–ª–∞–∫—Ç–∏–∫–µ",
                pages: [
                    "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å '–ó–≤–µ–∑–¥–Ω—ã–π –ø—É—Ç–Ω–∏–∫' –ª–µ—Ç–µ–ª —Å–∫–≤–æ–∑—å –≥–∞–ª–∞–∫—Ç–∏–∫—É...",
                    "–ù–∞ –±–æ—Ä—Ç—É –±—ã–ª –∫–∞–ø–∏—Ç–∞–Ω –î–∂–æ–Ω –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥–∞ –∏–∑ —Å–º–µ–ª—å—á–∞–∫–æ–≤",
                    "–í–¥—Ä—É–≥ –æ–Ω–∏ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –Ω–æ–≤—É—é –ø–ª–∞–Ω–µ—Ç—É, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ –±—ã–ª–æ –Ω–∞ –∫–∞—Ä—Ç–µ!",
                    "–û–Ω–∏ —Ä–µ—à–∏–ª–∏ –ø—Ä–∏–∑–µ–º–ª–∏—Ç—å—Å—è –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∑–∞–≥–∞–¥–æ—á–Ω—ã–π –º–∏—Ä",
                    "–ù–∞ –ø–ª–∞–Ω–µ—Ç–µ –æ–Ω–∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã—Ö –∏–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω! –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç..."
                ]
            },
            {
                id: 3,
                title: "–î–µ—Ç–µ–∫—Ç–∏–≤",
                icon: "üîç",
                description: "–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏–µ",
                pages: [
                    "–í –¥–æ–∂–¥–ª–∏–≤—É—é –Ω–æ—á—å —Ä–∞–∑–¥–∞–ª—Å—è –∫—Ä–∏–∫ –∏–∑ –æ—Å–æ–±–Ω—è–∫–∞ –º–∏—Å—Ç–µ—Ä–∞ –ë—Ä–∞—É–Ω–∞",
                    "–î–µ—Ç–µ–∫—Ç–∏–≤ –°–º–∏—Ç –ø—Ä–∏–±—ã–ª –Ω–∞ –º–µ—Å—Ç–æ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ",
                    "–û–Ω –Ω–∞—à–µ–ª —Å—Ç—Ä–∞–Ω–Ω—É—é –∑–∞–ø–∏—Å–∫—É —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ—Å–ª–∞–Ω–∏–µ–º",
                    "–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–≤ –∑–∞–ø–∏—Å–∫—É, –æ–Ω –ø–æ–Ω—è–ª, –∫—Ç–æ —ç—Ç–æ —Å–¥–µ–ª–∞–ª!",
                    "–ü—Ä–µ—Å—Ç—É–ø–Ω–∏–∫ –±—ã–ª –ø–æ–π–º–∞–Ω. –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å –≤–æ—Å—Ç–æ—Ä–∂–µ—Å—Ç–≤–æ–≤–∞–ª–∞!"
                ]
            },
            {
                id: 4,
                title: "–ú–∞–≥–∏—è",
                icon: "üßô",
                description: "–ú–∏—Ä –≤–æ–ª—à–µ–±—Å—Ç–≤–∞ –∏ —á—É–¥–µ—Å",
                pages: [
                    "–í –¥–æ–ª–∏–Ω–µ –º–∞–≥–∏–∏ –∂–∏–ª –º–æ–ª–æ–¥–æ–π –≤–æ–ª—à–µ–±–Ω–∏–∫ –ø–æ –∏–º–µ–Ω–∏ –§–ª–∞—Ä–∏–Ω",
                    "–û–Ω —É—á–∏–ª—Å—è –≤ –¥—Ä–µ–≤–Ω–µ–π –∞–∫–∞–¥–µ–º–∏–∏ –º–∞–≥–∏–∏ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–∞",
                    "–û–¥–Ω–∞–∂–¥—ã –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–ª –¥—Ä–µ–≤–Ω—é—é –∫–Ω–∏–≥—É –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π",
                    "–ù–æ –∫–Ω–∏–≥–∞ –±—ã–ª–∞ –ø—Ä–æ–∫–ª—è—Ç–∞! –§–ª–∞—Ä–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã–ª —Ä–∞–∑—Ä—É—à–∏—Ç—å —á–∞—Ä—ã",
                    "–° –ø–æ–º–æ—â—å—é –¥—Ä—É–∑–µ–π –æ–Ω –ø–æ–±–µ–¥–∏–ª –∑–ª–æ –∏ —Å—Ç–∞–ª –≤–µ–ª–∏–∫–∏–º –º–∞–≥–æ–º!"
                ]
            }
        ];

        let currentComic = null;
        let currentPage = 0;

        function loadComicsGallery() {
            const grid = document.getElementById('comics-grid');
            grid.innerHTML = '';

            comicsData.forEach(comic => {
                const item = document.createElement('div');
                item.className = 'comic-item';
                item.innerHTML = `
                    <div class="comic-cover">${comic.icon}</div>
                    <div class="comic-info">
                        <h3>${comic.title}</h3>
                        <p>${comic.description}</p>
                    </div>
                `;
                item.onclick = () => openComic(comic);
                grid.appendChild(item);
            });
        }

        function openComic(comic) {
            currentComic = comic;
            currentPage = 0;
            document.getElementById('comic-title').textContent = comic.title;
            document.getElementById('comic-content').textContent = comic.pages[0];
            document.getElementById('comic-page-num').textContent = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ ' + comic.pages.length;
            document.getElementById('comic-viewer').classList.add('active');
        }

        function closeComicViewer() {
            document.getElementById('comic-viewer').classList.remove('active');
            currentComic = null;
            currentPage = 0;
        }

        function nextComicPage() {
            if (!currentComic || currentPage >= currentComic.pages.length - 1) return;
            currentPage++;
            document.getElementById('comic-content').textContent = currentComic.pages[currentPage];
            document.getElementById('comic-page-num').textContent = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ ' + (currentPage + 1) + ' –∏–∑ ' + currentComic.pages.length;
        }

        function prevComicPage() {
            if (!currentComic || currentPage <= 0) return;
            currentPage--;
            document.getElementById('comic-content').textContent = currentComic.pages[currentPage];
            document.getElementById('comic-page-num').textContent = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ ' + (currentPage + 1) + ' –∏–∑ ' + currentComic.pages.length;
        }

        // ============================================
        // –ß–ê–¢ –ò –ú–ê–°–ö–û–¢
        // ============================================
        let chatMessages = [];
        let messageCount = 0;
        let hackerActive = false;
        let mascotDead = false;

        function initChat() {
            addBotMessage('–ü—Ä–∏–≤–µ—Ç! –Ø –†–æ–±–æ—Ç - —Ç–≤–æ–π –º–∞—Å–∫–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫! ü§ñ');
            setTimeout(() => {
                addBotMessage('–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å? –°–ø—Ä–æ—Å–∏ –º–µ–Ω—è —á—Ç–æ-–Ω–∏–±—É–¥—å!');
            }, 1000);
        }

        function addMessage(sender, avatar, text, type = 'bot') {
            const messagesDiv = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${type}`;

            messageDiv.innerHTML = `
                <div class="sender">
                    <span class="avatar">${avatar}</span>
                    <span>${sender}</span>
                </div>
                <div class="text">${text}</div>
            `;

            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            chatMessages.push({ sender, text, type });
        }

        function addBotMessage(text) {
            addMessage('–†–æ–±–æ—Ç ü§ñ', 'ü§ñ', text, 'bot');
        }

        function addHackerMessage(text) {
            addMessage('???', 'üíÄ', text, 'hacker');
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const text = input.value.trim();

            if (!text) return;

            addMessage('–í—ã', 'üë§', text, 'user');
            input.value = '';
            messageCount++;

            // –û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞
            setTimeout(() => {
                processUserMessage(text);
            }, 500);

            // –ü–æ—Å–ª–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ö–∞–∫–µ—Ä
            if (messageCount >= 5 && !hackerActive) {
                hackerActive = true;
                setTimeout(() => {
                    addHackerMessage('–ü—Ä–∏–≤–µ—Ç... üëª');
                    setTimeout(() => {
                        addHackerMessage('–•–æ—á–µ—à—å VIP —Å—Ç–∞—Ç—É—Å? üòà');
                        setTimeout(() => {
                            addHackerMessage('–°–∫–∞—á–∞—Ç—å VIP: vip-virus.exe üéÅ');
                            showNotification('‚ö†Ô∏è –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç ???');
                        }, 2000);
                    }, 2000);
                }, 3000);
            }

            // –ï—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ–º VIP - –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–∏—Ä—É—Å
            if (text.toLowerCase().includes('vip') && hackerActive) {
                setTimeout(() => {
                    addHackerMessage('–û—Ç–ª–∏—á–Ω–æ! –°–∫–∞—á–∏–≤–∞—é VIP... üíÄ');
                    setTimeout(() => {
                        triggerDeathScreen();
                    }, 2000);
                }, 1000);
            }
        }

        function processUserMessage(text) {
            const lowerText = text.toLowerCase();

            if (lowerText.includes('–ø—Ä–∏–≤–µ—Ç') || lowerText.includes('–∑–¥—Ä–∞–≤—Å—Ç–≤')) {
                addBotMessage('–ü—Ä–∏–≤–µ—Ç, –¥—Ä—É–≥! –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! üòä');
            } else if (lowerText.includes('–∫–∞–∫ –¥–µ–ª–∞') || lowerText.includes('–∫–∞–∫ —Ç—ã')) {
                addBotMessage('–û—Ç–ª–∏—á–Ω–æ! –†–∞–±–æ—Ç–∞—é –Ω–∞ –ø–æ–ª–Ω—É—é –º–æ—â–Ω–æ—Å—Ç—å! üöÄ');
            } else if (lowerText.includes('–ø–æ–º–æ—â—å') || lowerText.includes('help')) {
                addBotMessage('–Ø –º–æ–≥—É –ø–æ–º–æ—á—å! –°–ø—Ä–æ—Å–∏ –º–µ–Ω—è –ø—Ä–æ –∏–≥—Ä—ã, —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞–µ–º! üí°');
            } else if (lowerText.includes('–∏–≥—Ä–∞') || lowerText.includes('–∏–≥—Ä—ã')) {
                addBotMessage('–£ –Ω–∞—Å –µ—Å—Ç—å –∫—É—á–∞ –∏–≥—Ä! –ó–º–µ–π–∫–∞, –î—É—ç–ª—å, Geometry Dash, Brawl Stars! üéÆ');
            } else if (lowerText.includes('—Å–ø–∞—Å–∏–±–æ') || lowerText.includes('–±–ª–∞–≥–æ–¥–∞—Ä')) {
                addBotMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! üôè');
            } else if (lowerText.includes('—á—Ç–æ —É–º–µ–µ—à—å') || lowerText.includes('—á—Ç–æ –º–æ–∂–µ—à—å')) {
                addBotMessage('–Ø –º–∞—Å–∫–æ—Ç —ç—Ç–æ–π –û–°! –ú–æ–≥—É –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å, —Ä–∞–∑–≤–µ—Å–µ–ª–∏—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å! ü§ñ‚ú®');
            } else if (lowerText.includes('–≤—Ä–µ–º—è')) {
                const now = new Date();
                addBotMessage(`–°–µ–π—á–∞—Å ${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')} ‚è∞`);
            } else if (lowerText.includes('???') || lowerText.includes('—Ö–∞–∫–µ—Ä')) {
                addBotMessage('–û—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ —Å –Ω–µ–∑–Ω–∞–∫–æ–º—ã–º–∏! –í –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –µ—Å—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏... ‚ö†Ô∏è');
            } else {
                const responses = [
                    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏ –±–æ–ª—å—à–µ! ü§î',
                    '–ü–æ–Ω–∏–º–∞—é! –ü—Ä–æ–¥–æ–ª–∂–∞–π! üëç',
                    '–•–º, –∑–∞–¥—É–º—á–∏–≤–æ... ü§î',
                    '–ö—Ä—É—Ç–æ! üéâ',
                    '–ê–≥–∞! –ü–æ–Ω—è–ª! üòä'
                ];
                addBotMessage(responses[Math.floor(Math.random() * responses.length)]);
            }
        }

        function toggleMascotChat() {
            if (mascotDead) {
                showNotification('üíÄ –ú–∞—Å–∫–æ—Ç –ø–æ–≥–∏–±... –°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞');
                return;
            }
            openApp('chat');
        }

        function triggerDeathScreen() {
            mascotDead = true;

            // –£–±–∏–≤–∞–µ–º –º–∞—Å–∫–æ—Ç–∞
            document.getElementById('mascot').classList.add('dead');
            document.querySelector('.mascot-bubble').textContent = 'üíÄ';

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω —Å–º–µ—Ä—Ç–∏
            setTimeout(() => {
                document.getElementById('death-screen').classList.add('active');
            }, 1000);
        }

        // ============================================
        // –ü–†–ò–õ–û–ñ–ï–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–Ø (TELEGRAM-STYLE)
        // ============================================
        let chats = [
            {
                id: 'robot',
                name: 'ü§ñ –†–æ–±–æ—Ç',
                avatar: 'ü§ñ',
                type: 'robot',
                lastMessage: '–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫!',
                time: '12:00',
                online: true,
                messages: [
                    { text: '–ü—Ä–∏–≤–µ—Ç! –Ø –†–æ–±–æ—Ç! ü§ñ', sent: false, time: '12:00' },
                    { text: '–†–∞–¥ –ø–æ–º–æ—á—å —Ç–µ–±–µ!', sent: false, time: '12:00' }
                ]
            },
            {
                id: 'hacker',
                name: '???',
                avatar: 'üíÄ',
                type: 'hacker',
                lastMessage: '–•–æ—á–µ—à—å VIP? üòà',
                time: '03:00',
                online: true,
                messages: [
                    { text: '–ü—Ä–∏–≤–µ—Ç... üëª', sent: false, time: '02:55' },
                    { text: '–•–æ—á–µ—à—å VIP —Å—Ç–∞—Ç—É—Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ? üòà', sent: false, time: '03:00' },
                    { text: '–°–∫–∞—á–∞—Ç—å VIP: vip-virus.exe üéÅ', sent: false, time: '03:01' }
                ]
            }
        ];

        let activeChat = null;
        let messagesAppHackerActive = false;

        function initMessagesApp() {
            const chatsList = document.getElementById('chats-list');
            if (!chatsList) {
                return;
            }

            renderChatsList();
        }

        function renderChatsList() {
            const chatsList = document.getElementById('chats-list');
            chatsList.innerHTML = '';

            chats.forEach(chat => {
                const chatItem = document.createElement('div');
                chatItem.className = 'chat-item';
                if (activeChat && activeChat.id === chat.id) {
                    chatItem.classList.add('active');
                }

                chatItem.innerHTML = `
                    <div class="chat-item-avatar ${chat.type}">${chat.avatar}</div>
                    <div class="chat-item-info">
                        <div class="chat-item-name">${chat.name}</div>
                        <div class="chat-item-last-message">${chat.lastMessage}</div>
                    </div>
                    <div class="chat-item-time">${chat.time}</div>
                `;

                chatItem.onclick = () => openChat(chat);
                chatsList.appendChild(chatItem);
            });
        }

        function openChat(chat) {
            activeChat = chat;
            renderChatsList();
            renderChatView(chat);
        }

        function renderChatView(chat) {
            const chatView = document.getElementById('chat-view');

            chatView.innerHTML = `
                <div class="chat-view-header">
                    <div class="avatar ${chat.type}">${chat.avatar}</div>
                    <div class="info">
                        <h3>${chat.name}</h3>
                        <p>${chat.online ? 'üü¢ –í —Å–µ—Ç–∏' : '‚ö´ –ù–µ –≤ —Å–µ—Ç–∏'}</p>
                    </div>
                </div>
                <div class="messages-container" id="messages-container"></div>
                <div class="message-input-area">
                    <input type="text" class="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..."
                           onkeypress="if(event.key==='Enter')sendTelegramMessage()" id="telegram-input">
                    <button class="send-button" onclick="sendTelegramMessage()">‚û§</button>
                </div>
            `;

            const container = document.getElementById('messages-container');
            chat.messages.forEach(msg => {
                addMessageToContainer(container, msg);
            });

            container.scrollTop = container.scrollHeight;

            // –ï—Å–ª–∏ —ç—Ç–æ —Ö–∞–∫–µ—Ä –∏ –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω - –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ
            if (chat.id === 'hacker' && !messagesAppHackerActive) {
                messagesAppHackerActive = true;
                setTimeout(() => {
                    addTelegramMessage('hacker', '–ü—Ä–∏–≤–µ—Ç... üëª');
                    setTimeout(() => {
                        addTelegramMessage('hacker', '–•–æ—á–µ—à—å VIP? üòà');
                    }, 2000);
                }, 1000);
            }
        }

        function addMessageToContainer(container, msg) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${msg.sent ? 'sent' : 'received'}`;
            messageDiv.innerHTML = `
                ${msg.text}
                <div class="message-time">${msg.time}</div>
            `;
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function addTelegramMessage(chatId, text) {
            const chat = chats.find(c => c.id === chatId);
            if (!chat) return;

            const now = new Date();
            const time = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;

            const newMessage = { text, sent: false, time };
            chat.messages.push(newMessage);
            chat.lastMessage = text;
            chat.time = time;

            if (activeChat && activeChat.id === chatId) {
                const container = document.getElementById('messages-container');
                if (container) {
                    addMessageToContainer(container, newMessage);
                }
            }

            renderChatsList();
        }

        function sendTelegramMessage() {
            if (!activeChat) return;

            const input = document.getElementById('telegram-input');
            const text = input.value.trim();
            if (!text) return;

            const now = new Date();
            const time = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;

            const newMessage = { text, sent: true, time };
            activeChat.messages.push(newMessage);
            activeChat.lastMessage = text;
            activeChat.time = time;

            const container = document.getElementById('messages-container');
            addMessageToContainer(container, newMessage);

            input.value = '';
            renderChatsList();

            // –û—Ç–≤–µ—Ç –æ—Ç —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
            setTimeout(() => {
                if (activeChat.id === 'robot') {
                    const responses = [
                        '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! üòä',
                        '–ü–æ–Ω—è–ª! üëç',
                        '–û—Ç–ª–∏—á–Ω–æ! üéâ',
                        '–•–æ—Ä–æ—à–æ! üëå',
                        '–†–∞–¥ –ø–æ–º–æ—á—å! ü§ñ'
                    ];
                    addTelegramMessage('robot', responses[Math.floor(Math.random() * responses.length)]);
                } else if (activeChat.id === 'hacker') {
                    if (text.toLowerCase().includes('vip')) {
                        addTelegramMessage('hacker', '–û—Ç–ª–∏—á–Ω–æ! –°–∫–∞—á–∏–≤–∞—é VIP... üíÄ');
                        setTimeout(() => {
                            triggerDeathScreen();
                        }, 2000);
                    } else {
                        addTelegramMessage('hacker', '–°–∫–∞—á–∞–π VIP! vip-virus.exe üéÅ');
                    }
                }
            }, 1000);
        }

        function restoreSystem() {
            showNotification('üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã...');

            setTimeout(() => {
                mascotDead = false;
                hackerActive = false;
                messageCount = 0;
                messagesAppHackerActive = false;

                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞—Å–∫–æ—Ç–∞
                document.getElementById('mascot').classList.remove('dead');
                document.querySelector('.mascot-bubble').textContent = 'üí¨ –ù–∞–∂–º–∏ —á—Ç–æ–±—ã –ø–æ–æ–±—â–∞—Ç—å—Å—è!';

                // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω —Å–º–µ—Ä—Ç–∏
                document.getElementById('death-screen').classList.remove('active');

                // –û—á–∏—â–∞–µ–º —á–∞—Ç
                const chatMessagesEl = document.getElementById('chat-messages');
                if (chatMessagesEl) chatMessagesEl.innerHTML = '';
                chatMessages = [];

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —á–∞—Ç—ã –≤ –°–æ–æ–±—â–µ–Ω–∏—è—Ö
                chats = [
                    {
                        id: 'robot',
                        name: 'ü§ñ –†–æ–±–æ—Ç',
                        avatar: 'ü§ñ',
                        type: 'robot',
                        lastMessage: '–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫!',
                        time: '12:00',
                        online: true,
                        messages: [
                            { text: '–ü—Ä–∏–≤–µ—Ç! –Ø –†–æ–±–æ—Ç! ü§ñ', sent: false, time: '12:00' },
                            { text: '–†–∞–¥ –ø–æ–º–æ—á—å —Ç–µ–±–µ!', sent: false, time: '12:00' }
                        ]
                    },
                    {
                        id: 'hacker',
                        name: '???',
                        avatar: 'üíÄ',
                        type: 'hacker',
                        lastMessage: '–•–æ—á–µ—à—å VIP? üòà',
                        time: '03:00',
                        online: true,
                        messages: [
                            { text: '–ü—Ä–∏–≤–µ—Ç... üëª', sent: false, time: '02:55' },
                            { text: '–•–æ—á–µ—à—å VIP —Å—Ç–∞—Ç—É—Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ? üòà', sent: false, time: '03:00' },
                            { text: '–°–∫–∞—á–∞—Ç—å VIP: vip-virus.exe üéÅ', sent: false, time: '03:01' }
                        ]
                    }
                ];
                activeChat = null;

                // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
                const chatsListEl = document.getElementById('chats-list');
                if (chatsListEl) {
                    renderChatsList();
                    const chatView = document.getElementById('chat-view');
                    if (chatView) {
                        chatView.innerHTML = `
                            <div class="no-chat-selected">
                                <div class="icon">üí¨</div>
                                <p>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
                            </div>
                        `;
                    }
                }

                // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —á–∞—Ç
                setTimeout(() => {
                    addBotMessage('–§—É—Ö! –°–ø–∞—Å–∏–±–æ —á—Ç–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª —Å–∏—Å—Ç–µ–º—É! üòÖ');
                    setTimeout(() => {
                        addBotMessage('–ë–æ–ª—å—à–µ –Ω–µ —Å–∫–∞—á–∏–≤–∞–π VIP –æ—Ç –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–µ–≤! ‚ö†Ô∏è');
                    }, 1500);
                    showNotification('‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!');
                }, 1000);
            }, 2000);
        }
    </script>
</body>
</html>